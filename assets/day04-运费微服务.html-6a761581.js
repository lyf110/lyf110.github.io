import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o,c as i,a as n,b as s,d as p,e as t}from"./app-5f6064b2.js";const l="/assets/image-20240407183435224-163-4eae522d.gif",u="/assets/image-20240407183435224-164-c598b90e.png",k="/assets/image-20240407183435224-165-ae57f5c9.png",r="/assets/image-20240407183435224-166-c88f1423.png",d="/assets/image-20240407183435224-167-e7963342.png",m="/assets/image-20240407183435224-168-6173733f.png",v="/assets/image-20240407183435224-169-ee7b524e.png",b="/assets/image-20240407183435225-170-8efc6c48.png",g="/assets/image-20240407183435225-171-f6257fa6.png",y="/assets/image-20240407183435225-172-db8d5d57.png",f="/assets/image-20240407183435225-173-629e40f3.png",w="/assets/image-20240407183435225-174-34e33883.png",h="/assets/image-20240407183435225-175-13353831.png",C="/assets/image-20240407183435225-176-42f6dd52.png",T="/assets/image-20240407183435225-177-cc7008e6.png",O="/assets/image-20240407183435225-178-c753c583.png",_="/assets/image-20240407183435225-179-ae873040.png",E="/assets/image-20240407183435226-180-f02b2aee.png",x="/assets/image-20240407183435226-181-f762748b.png",D="/assets/image-20240407183435226-182-73743d18.png",j="/assets/image-20240407183435226-183-5c344a53.png",S="/assets/image-20240407183435226-184-0f87e92f.png",L={},N=t('<h1 id="è¯¾ç¨‹å®‰æ’" tabindex="-1"><a class="header-anchor" href="#è¯¾ç¨‹å®‰æ’" aria-hidden="true">#</a> è¯¾ç¨‹å®‰æ’</h1><ul><li>äº†è§£è¿è´¹çš„ä¸šåŠ¡éœ€æ±‚</li><li>äº†è§£è¿è´¹æ¨¡æ¿è¡¨çš„è®¾è®¡</li><li>å®ç°è¿è´¹è®¡ç®—çš„ä¸šåŠ¡é€»è¾‘</li><li>å®Œæˆéƒ¨ç½²æœåŠ¡ä»¥åŠåŠŸèƒ½æµ‹è¯•</li></ul><h1 id="_1ã€èƒŒæ™¯è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#_1ã€èƒŒæ™¯è¯´æ˜" aria-hidden="true">#</a> 1ã€èƒŒæ™¯è¯´æ˜</h1><p>ç°åœ¨å‡ºç°äº†æ–°çš„æƒ…å†µï¼Œå¼€å‘äºŒç»„ä¸€åè´Ÿè´£è¿è´¹å¾®æœåŠ¡çš„åŒäº‹å°å¼ ç¦»èŒäº†ï¼Œå¼€å‘äºŒç»„ç›®å‰äººæ‰‹ä¸è¶³ï¼Œéœ€è¦å€Ÿè°ƒå»æ¥æ‰‹è¿™ä¸ªä»»åŠ¡ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œè¿è´¹è®¡ç®—å¾®æœåŠ¡æ˜¯æ ¸å¿ƒçš„å¾®æœåŠ¡ï¼Œä¸èƒ½å‡ºç°è®¡ç®—é”™è¯¯ï¼Œæ¯•ç«Ÿæ˜¯é’±æŒ‚é’©çš„ã€‚<br> å¯¹äº†ï¼Œå°å¼ ç¦»èŒå‰å·²ç»å°†è¯¥å¾®æœåŠ¡çš„åŸºæœ¬æ¡†æ¶æ­å»ºå®Œæˆäº†ï¼Œä½ åªéœ€è¦å®ç°æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘å°±å¯ä»¥äº†ï¼Œè¿™å¯¹ä½ æ¥è¯´å¯èƒ½æ˜¯ä¸ªå¥½æ¶ˆæ¯â€¦â€¦</p><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="_2ã€éœ€æ±‚åˆ†æ" tabindex="-1"><a class="header-anchor" href="#_2ã€éœ€æ±‚åˆ†æ" aria-hidden="true">#</a> 2ã€éœ€æ±‚åˆ†æ</h1><p>æ¥åˆ°å¼€å‘ä»»åŠ¡åï¼Œé¦–å…ˆéœ€è¦äº†è§£éœ€æ±‚ï¼Œå†åŠ¨æ‰‹å¼€å‘ã€‚</p><p>è¿è´¹çš„è®¡ç®—æ˜¯åˆ†ä¸åŒåœ°åŒºçš„ï¼Œæ¯”å¦‚ï¼šåŒåŸã€çœå†…ã€è·¨çœï¼Œè®¡ç®—è§„åˆ™æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥é’ˆå¯¹ä¸åŒçš„ç±»å‹éœ€è¦è®¾ç½®ä¸åŒçš„è¿è´¹è§„åˆ™ï¼Œè¿™å…¶å®å°±æ˜¯æ‰€è°“çš„æ¨¡æ¿ã€‚</p><h2 id="_2-1ã€æ¨¡æ¿åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#_2-1ã€æ¨¡æ¿åˆ—è¡¨" aria-hidden="true">#</a> 2.1ã€æ¨¡æ¿åˆ—è¡¨</h2><p>äº§å“éœ€æ±‚ä¸­çš„è¿è´¹æ¨¡æ¿åˆ—è¡¨ï¼š<br><img src="'+u+'" alt="" loading="lazy"></p><div class="hint-container info"><p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p><p><strong>è½»æŠ›ç³»æ•°åç§°è§£é‡Šï¼š</strong><br> åœ¨è®¡ç®—è¿è´¹æ—¶ï¼ŒåŒ…è£¹æœ‰ä¸¤ä¸ªç»´åº¦ï¼Œä½“ç§¯å’Œé‡é‡ï¼ŒäºŒè€…è°å¤§å–è°è¿›è¡Œè®¡ç®—ï¼Œä½†æ˜¯ä½“ç§¯å’Œé‡é‡ä¸æ˜¯ä¸€ä¸ªå•ä½æ€ä¹ˆæ¯”è¾ƒå‘¢ï¼Ÿä¸€èˆ¬çš„åšæ³•å°±æ˜¯å°†ä½“ç§¯è½¬åŒ–æˆé‡é‡ï¼Œå…¬å¼ï¼šä½“ç§¯ / è½»æŠ›ç³»æ•° = é‡é‡ï¼Œè¿™æ ·å°±å¯ä»¥æ¯”è¾ƒäº†ã€‚<br> ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸åŒçš„ä½“ç§¯ï¼Œè½»æŠ›ç³»æ•°è¶Šå¤§è®¡ç®—å‡ºçš„é‡é‡å°±è¶Šå°ï¼Œåä¹‹å°±è¶Šå¤§ã€‚</p></div><h2 id="_2-2ã€è®¡è´¹è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_2-2ã€è®¡è´¹è§„åˆ™" aria-hidden="true">#</a> 2.2ã€è®¡è´¹è§„åˆ™</h2><p><strong>é‡é‡è®¡ç®—æ–¹æ³•ï¼š</strong><br> å–é‡é‡å’Œä½“ç§¯ä¸¤è€…é—´è¾ƒå¤§çš„æ•°å€¼ï¼Œä½“ç§¯è®¡ç®—æ–¹æ³•ï¼šé•¿(cm)Ã—_å®½(cm)_Ã—é«˜(cm) / è½»æŠ›ç³»æ•°</p><p><strong>æ™®å¿«ï¼š</strong><br> åŒåŸäº’å¯„ï¼š12000<br> çœå†…å¯„ä»¶ï¼š8000<br> è·¨çœå¯„ä»¶ï¼š12000<br> ç»æµåŒºäº’å¯„ï¼ˆäº¬æ´¥ç¿¼ã€æ±Ÿæµ™æ²ªï¼‰ï¼š6000<br> ç»æµåŒºäº’å¯„ï¼ˆé»‘å‰è¾½ï¼‰ï¼š12000<br> ç»æµåŒºäº’å¯„ï¼ˆå·æ¸ï¼‰ï¼š8000</p><hr><p><strong>è®¡è´¹é‡é‡å°æ•°ç‚¹è§„åˆ™ï¼š</strong></p><p>ä¸æ»¡1kgï¼ŒæŒ‰1kgè®¡è´¹ï¼›<br> 10KGä»¥ä¸‹ï¼šä»¥0.1kgä¸ºè®¡é‡å•ä½ï¼Œå››èˆäº”å…¥ä¿ç•™ 1 ä½å°æ•°ï¼›<br> 10-100KGï¼šç»­é‡ä»¥0.5kgä¸ºè®¡é‡å•ä½ï¼Œä¸è¶³0.5kgæŒ‰0.5kgç®—ï¼Œå››èˆäº”å…¥ä¿ç•™ 1 ä½å°æ•°ï¼›<br> 100KGåŠä»¥ä¸Šï¼šå››èˆäº”å…¥å–æ•´ï¼›</p><blockquote><p><strong>ä¸¾ä¾‹ï¼š</strong><br> 8.4kgæŒ‰ç…§8.4kgæ”¶è´¹<br> 8.5kgæŒ‰ç…§8.5kgæ”¶è´¹<br> 8.8kgæŒ‰ç…§8.8kgæ”¶è´¹<br> 18.1kgæŒ‰ç…§18.5kgæ”¶è´¹<br> 18.5kgæŒ‰ç…§18.5kgæ”¶è´¹<br> 18.7kgæŒ‰ç…§19kgæ”¶è´¹<br> 108.4kgæŒ‰ç…§108kgæ”¶è´¹<br> 108.5kgæŒ‰ç…§109kgæ”¶è´¹<br> 108.6kgæŒ‰ç…§109kgæ”¶è´¹</p></blockquote><p>æ€»è¿è´¹å°æ•°ç‚¹è§„åˆ™ï¼š<strong>æŒ‰å››èˆäº”å…¥è®¡ç®—ï¼Œç²¾ç¡®åˆ°å°æ•°ç‚¹åä¸€ä½</strong></p><hr><p>æ¨¡æ¿ä¸å¯é‡å¤è®¾ç½®ï¼Œéœ€ç¡®ä¿å”¯ä¸€å€¼ã€‚<br> å¦‚å·²è®¾ç½®åŒåŸå¯„ã€è·¨çœå¯„ã€çœå†…å¯„ï¼Œåˆ™åªå¯ä¿®æ”¹ï¼Œä¸å¯å†æ–°å¢<br> å¦‚å·²è®¾ç½®ç»æµåŒºäº’å¯„æŸä¸ªåŸå¸‚ï¼Œä¸‹æ¬¡æ·»åŠ ä¸å¯å†å…³è”æ­¤ç»æµåŒºåŸå¸‚</p><h2 id="_2-3ã€æ–°å¢æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#_2-3ã€æ–°å¢æ¨¡æ¿" aria-hidden="true">#</a> 2.3ã€æ–°å¢æ¨¡æ¿</h2><p>è¿è´¹æ¨¡æ¿æœ‰4ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼š<br> åŒåŸå¯„ï¼šåŒåŸå¯„ä»¶è¿è´¹è®¡ç®—æ¨¡æ¿ï¼Œå…¨å›½ç»Ÿä¸€å®šä»·<br> çœå†…å¯„ï¼šçœå†…å¯„ä»¶è¿è´¹è®¡ç®—æ¨¡æ¿ï¼Œå…¨å›½ç»Ÿä¸€å®šä»·<br> è·¨çœå¯„ï¼šä¸åŒçœä»½é—´çš„è¿è´¹è®¡ç®—æ¨¡æ¿ï¼Œå…¨å›½ç»Ÿä¸€å®šä»·<br> ç»æµåŒºäº’å¯„ï¼š4ä¸ªç»æµåŒºï¼ˆäº¬æ´¥ç¿¼ã€æ±Ÿæ²ªæµ™çš–ã€å·æ¸ã€é»‘å‰è¾½ï¼‰ï¼Œç»æµåŒºé—´å¯„ä»¶å¯è®¾ç½®ä¼˜æƒ ä»·æ ¼</p><h3 id="_2-3-1ã€å…¨å›½èŒƒå›´" tabindex="-1"><a class="header-anchor" href="#_2-3-1ã€å…¨å›½èŒƒå›´" aria-hidden="true">#</a> 2.3.1ã€å…¨å›½èŒƒå›´</h3><figure><img src="'+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ­¤æ¨¡æ¿ä¸ºâ€˜åŒåŸå¯„/çœå†…å¯„/è·¨çœâ€™ä¸‰ä¸ªç±»å‹çš„è¿è´¹æ¨¡æ¿<br> æ¨¡æ¿ç±»å‹ï¼šå¯é€‰æ‹©åŒåŸå¯„/çœå†…å¯„/è·¨çœ/ç»æµåŒºäº’å¯„<br> è¿é€ç±»å‹ï¼šå¯é€‰æ‹©è¿é€ç±»å‹ï¼Œç›®å‰ä¸šåŠ¡åªæ”¯æŒæ™®å¿«<br> å…³è”åŸå¸‚ï¼š<br> åŒåŸå¯„/çœå†…å¯„/è·¨çœï¼šå…¨å›½ç»Ÿä¸€å®šä»·ï¼ˆå¦‚ä¸Šå›¾ï¼‰<br> é¦–é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼<br> ç»­é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼<br> è½»æŠ›ç³»æ•°ï¼šæ•´æ•°ï¼Œå¯è¾“å…¥1-99999é—´ï¼Œä»»æ„æ•°å€¼</p><h3 id="_2-3-2ã€ç»æµåŒºäº’å¯„" tabindex="-1"><a class="header-anchor" href="#_2-3-2ã€ç»æµåŒºäº’å¯„" aria-hidden="true">#</a> 2.3.2ã€ç»æµåŒºäº’å¯„</h3><figure><img src="'+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ­¤æ¨¡æ¿ä¸ºâ€˜ç»æµåŒºäº’å¯„â€™ç±»å‹çš„è¿è´¹æ¨¡æ¿<br> æ¨¡æ¿ç±»å‹ï¼šå¯é€‰æ‹©åŒåŸå¯„/çœå†…å¯„/è·¨çœ/ç»æµåŒºäº’å¯„<br> è¿é€ç±»å‹ï¼šå¯é€‰æ‹©è¿é€ç±»å‹ï¼Œç›®å‰ä¸šåŠ¡åªæ”¯æŒæ™®å¿«<br> å…³è”åŸå¸‚ï¼š<br> ç»æµåŒºäº’å¯„ï¼šå¯è®¾ç½®å•ä¸ªæˆ–å¤šä¸ªç»æµåŒºä»·æ ¼ï¼ˆå¦‚ä¸Šå›¾ï¼‰<br> é¦–é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼<br> ç»­é‡ä»·æ ¼ï¼šä¿ç•™å°æ•°ç‚¹åä¸€ä½ï¼Œå¯è¾“å…¥1-999é—´ä»»æ„æ•°å€¼<br> è½»æŠ›ç³»æ•°ï¼šæ•´æ•°ï¼Œå¯è¾“å…¥1-99999é—´ï¼Œä»»æ„æ•°å€¼</p><h1 id="_3ã€è¿è´¹æ¨¡æ¿è¡¨" tabindex="-1"><a class="header-anchor" href="#_3ã€è¿è´¹æ¨¡æ¿è¡¨" aria-hidden="true">#</a> 3ã€è¿è´¹æ¨¡æ¿è¡¨</h1><p>è¿è´¹æ¨¡æ¿æ˜¯éœ€è¦å­˜å‚¨åˆ°è¡¨ä¸­çš„ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦è®¾è®¡è¡¨ç»“æ„ï¼Œå…·ä½“è¡¨ç»“æ„è¯­å¥å¦‚ä¸‹ï¼š</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>sl_carriage<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>\n  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è¿è´¹æ¨¡æ¿id&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>template_type<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ¨¡æ¿ç±»å‹ï¼Œ1-åŒåŸå¯„ 2-çœå†…å¯„ 3-ç»æµåŒºäº’å¯„ 4-è·¨çœ&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>transport_type<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è¿é€ç±»å‹ï¼Œ1-æ™®å¿« 2-ç‰¹å¿«&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>associated_city<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å…³è”åŸå¸‚ï¼Œ1-å…¨å›½ 2-äº¬æ´¥å†€ 3-æ±Ÿæµ™æ²ª 4-å·æ¸ 5-é»‘å‰è¾½&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>first_weight<span class="token punctuation">`</span></span> <span class="token keyword">double</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;é¦–é‡ä»·æ ¼&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>continuous_weight<span class="token punctuation">`</span></span> <span class="token keyword">double</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;1&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç»­é‡ä»·æ ¼&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>light_throwing_coefficient<span class="token punctuation">`</span></span> <span class="token keyword">int</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è½»æŠ›ç³»æ•°&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>created<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>updated<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>\n  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span>\n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">COLLATE</span><span class="token operator">=</span>utf8mb4_general_ci ROW_FORMAT<span class="token operator">=</span>DYNAMIC <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">&#39;è¿è´¹æ¨¡æ¿è¡¨&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container danger"><p class="hint-container-title">è­¦å‘Š</p><p>è¯´æ˜ï¼šç”±äºè¯¥è¡¨æ•°æ®æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æ·»åŠ ç´¢å¼•å­—æ®µäº†ã€‚</p></div><p>åœ¨æ•°æ®åº“ä¸­å·²ç»é¢„å­˜äº†7æ¡æ•°æ®ï¼š<br><img src="'+d+'" alt="" loading="lazy"></p><blockquote><p>ğŸš¨ ç‰¹åˆ«éœ€è¦æ³¨æ„associated_cityå­—æ®µï¼Œå¦‚æœå¤šä¸ªç»æµåŒºäº’å¯„åŸå¸‚å…±ç”¨ä¸€å¥—æ¨¡æ¿ï¼Œå…¶æ•°æ®æ˜¯é€šè¿‡é€—å·åˆ†å‰²å­˜å‚¨çš„ï¼Œå¦‚ä¸‹ï¼š<br><img src="'+m+'" alt="" loading="lazy"></p></blockquote><h1 id="_4ã€æ‹‰å–ä»£ç " tabindex="-1"><a class="header-anchor" href="#_4ã€æ‹‰å–ä»£ç " aria-hidden="true">#</a> 4ã€æ‹‰å–ä»£ç </h1><p>éœ€è¦æ‹‰å–çš„å·¥ç¨‹æœ‰3ä¸ªï¼š</p>',37),H=n("thead",null,[n("tr",null,[n("th",null,"å·¥ç¨‹å"),n("th",null,"gitåœ°å€")])],-1),W=n("td",null,"sl-express-ms-carriage-domain",-1),R={href:"http://git.sl-express.com/sl/sl-express-ms-carriage-domain.git",target:"_blank",rel:"noopener noreferrer"},U=n("td",null,"sl-express-ms-carriage-api",-1),A={href:"http://git.sl-express.com/sl/sl-express-ms-carriage-api.git",target:"_blank",rel:"noopener noreferrer"},I=n("td",null,"sl-express-ms-carriage-service",-1),M={href:"http://git.sl-express.com/sl/sl-express-ms-carriage-service.git",target:"_blank",rel:"noopener noreferrer"},q=t(`<h1 id="_5ã€å®ç°ä¸šåŠ¡" tabindex="-1"><a class="header-anchor" href="#_5ã€å®ç°ä¸šåŠ¡" aria-hidden="true">#</a> 5ã€å®ç°ä¸šåŠ¡</h1><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦ç¼–å†™ä»£ç å®ç°å…·ä½“çš„ä¸šåŠ¡äº†ï¼ŒåŒäº‹å°å¼ å·²ç»å®ŒæˆåŸºæœ¬çš„ä»£ç æ¡†æ¶ï¼ŒåŒ…æ‹¬Controllerã€Serviceæ¥å£ç­‰ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°CarriageServiceå³å¯ã€‚éœ€è¦å®ç°4ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>extension<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">CarriageDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * è¿è´¹ç®¡ç†è¡¨ æœåŠ¡ç±»
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CarriageService</span> <span class="token keyword">extends</span> <span class="token class-name">IService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ–°å¢/ä¿®æ”¹è¿è´¹æ¨¡æ¿
     *
     * <span class="token keyword">@param</span> <span class="token parameter">carriageDto</span> æ–°å¢/ä¿®æ”¹è¿è´¹å¯¹è±¡
     *                    å¿…å¡«å­—æ®µï¼štemplateTypeã€transportType
     *                    æ›´æ–°æ—¶ä¼ å…¥idå­—æ®µ
     */</span>
    <span class="token class-name">CarriageDTO</span> <span class="token function">saveOrUpdate</span><span class="token punctuation">(</span><span class="token class-name">CarriageDTO</span> carriageDto<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * è·å–å…¨éƒ¨è¿è´¹æ¨¡æ¿
     *
     * <span class="token keyword">@return</span> è¿è´¹æ¨¡æ¿å¯¹è±¡åˆ—è¡¨
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * è¿è´¹è®¡ç®—
     *
     * <span class="token keyword">@param</span> <span class="token parameter">waybillDTO</span> è¿è´¹è®¡ç®—å¯¹è±¡
     * <span class="token keyword">@return</span> è¿è´¹æ¨¡æ¿å¯¹è±¡ï¼Œä¸ä»…åŒ…å«æ¨¡æ¿æ•°æ®è¿˜åŒ…å«ï¼šcomputeWeightã€expense å­—æ®µ
     */</span>
    <span class="token class-name">CarriageDTO</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token doc-comment comment">/**
     * æ ¹æ®æ¨¡æ¿ç±»å‹æŸ¥è¯¢æ¨¡æ¿ï¼Œç»æµåŒºäº’å¯„ä¸é€šè¿‡è¯¥æ–¹æ³•æŸ¥è¯¢æ¨¡æ¿
     *
     * <span class="token keyword">@param</span> <span class="token parameter">templateType</span> æ¨¡æ¿ç±»å‹ï¼š1-åŒåŸå¯„ï¼Œ2-çœå†…å¯„ï¼Œ4-è·¨çœ
     * <span class="token keyword">@return</span> è¿è´¹æ¨¡æ¿
     */</span>
    <span class="token class-name">CarriageEntity</span> <span class="token function">findByTemplateType</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> templateType<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-1ã€æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#_5-1ã€æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨" aria-hidden="true">#</a> 5.1ã€æŸ¥è¯¢æ¨¡æ¿åˆ—è¡¨</h2><p>ç¼–å†™<code>com.sl.ms.carriage.service.impl.CarriageServiceImpl</code>å®ç°ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarriageServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageMapper</span><span class="token punctuation">,</span> <span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span>
        <span class="token keyword">implements</span> <span class="token class-name">CarriageService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageDTO</span> <span class="token function">saveOrUpdate</span><span class="token punctuation">(</span><span class="token class-name">CarriageDTO</span> carriageDto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageDTO</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
            
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageEntity</span> <span class="token function">findByTemplateType</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> templateType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>templateType<span class="token punctuation">,</span> <span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">ECONOMIC_ZONE</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SLException</span><span class="token punctuation">(</span><span class="token class-name">CarriageExceptionEnum</span><span class="token punctuation">.</span><span class="token constant">METHOD_CALL_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token class-name">Wrappers</span><span class="token punctuation">.</span><span class="token function">lambdaQuery</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getTemplateType</span><span class="token punctuation">,</span> templateType<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getTransportType</span><span class="token punctuation">,</span> <span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">REGULAR_FAST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getOne</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥è¯¢åˆ—è¡¨ï¼Œéœ€è¦æŒ‰ç…§åˆ›å»ºæ—¶é—´å€’åºæ’åºï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageDTO</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ„é€ æŸ¥è¯¢æ¡ä»¶ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åº</span>
        <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token class-name">Wrappers</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span><span class="token function">lambdaQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">orderByDesc</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getCreated</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// æŸ¥è¯¢æ•°æ®åº“</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å°†ç»“æœè½¬æ¢ä¸ºDTOç±»å‹</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">CarriageUtils</span><span class="token operator">::</span><span class="token function">toDTO</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="hint-container danger"><p class="hint-container-title">è­¦å‘Š</p><p>å¦‚æœå·¥ç¨‹ä¸­ä¸å­˜åœ¨testç›®å½•ï¼Œéœ€è¦å…ˆåˆ›å»ºtestç›®å½•å†ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š<br><img src="`+v+'" alt="" loading="lazy"><br><img src="'+b+'" alt="" loading="lazy"></p></div><figure><img src="'+g+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">CarriageConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">CarriageDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">CarriageServiceTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CarriageService</span> carriageService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">saveOrUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageDTO</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CarriageDTO</span> carriageDTO <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>carriageDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">findByTemplateType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarriageEntity</span> carriageEntity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">findByTemplateType</span><span class="token punctuation">(</span><span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">SAME_CITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>carriageEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç»“æœï¼š<br><img src="`+y+'" alt="" loading="lazy"><br> ä¹Ÿå¯ä»¥åŸºäºswaggeræµ‹è¯•ï¼š</p>',13),F={href:"http://127.0.0.1:18094/doc.html",target:"_blank",rel:"noopener noreferrer"},z=t('<p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æŸ¥è¯¢åˆ°äº†æ•°æ®ï¼š</p><figure><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ•´åˆåˆ°åå°ç®¡ç†ç³»ç»Ÿä¸­ï¼š</p><figure><img src="'+w+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="_5-2ã€æ–°å¢æˆ–æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#_5-2ã€æ–°å¢æˆ–æ›´æ–°" aria-hidden="true">#</a> 5.2ã€æ–°å¢æˆ–æ›´æ–°</h2><h3 id="_5-2-1ã€æ•´ä½“æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-2-1ã€æ•´ä½“æµç¨‹" aria-hidden="true">#</a> 5.2.1ã€æ•´ä½“æµç¨‹</h3><figure><img src="'+h+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æµç¨‹è¯´æ˜ï¼š</p><ul><li>æ ¹æ®ä¼ å…¥çš„CarriageDTOå¯¹è±¡å‚æ•°è¿›è¡ŒæŸ¥è¯¢æ¨¡æ¿ï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯å¦ä¸ºç»æµåŒº</li><li>å¦‚æœæ˜¯éç»æµåŒºäº’å¯„ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­æ¨¡æ¿æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºæ–°å¢æ“ä½œï¼Œå¦‚æœæ˜¯æ–°å¢æ“ä½œå°±æŠ›å‡ºå¼‚å¸¸ï¼Œå…¶ä»–æƒ…å†µéƒ½å¯ä»¥è¿›è¡Œè½åº“</li><li>å¦‚æœæ˜¯ç»æµåŒºäº’å¯„ï¼Œéœ€è¦åˆ¤æ–­å…³è”åŸå¸‚æ˜¯å¦é‡å¤ï¼Œå¦‚æœé‡å¤æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™è¿›è¡Œè½åº“æ“ä½œ</li></ul><div class="hint-container danger"><p class="hint-container-title">è­¦å‘Š</p><p>â“æ¨¡æ¿ä¸ºä»€ä¹ˆä¸èƒ½é‡å¤ï¼Ÿ<br> å› ä¸ºè¿è´¹çš„è®¡ç®—æ˜¯é€šè¿‡æ¨¡æ¿è¿›è¡Œçš„ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæ¨¡æ¿ï¼Œè¯¥åŸºäºå“ªä¸ªæ¨¡æ¿è®¡ç®—å‘¢ï¼Ÿæ‰€ä»¥æ¨¡æ¿æ˜¯ä¸èƒ½é‡å¤çš„ã€‚</p></div><h3 id="_5-2-2ã€ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#_5-2-2ã€ä»£ç å®ç°" aria-hidden="true">#</a> 5.2.2ã€ä»£ç å®ç°</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageDTO</span> <span class="token function">saveOrUpdate</span><span class="token punctuation">(</span><span class="token class-name">CarriageDTO</span> carriageDto<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ–°å¢è¿è´¹æ¨¡æ¿ --&gt; {}&quot;</span><span class="token punctuation">,</span> carriageDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ€è·¯ï¼šé¦–å…ˆæ ¹æ®æ¡ä»¶æŸ¥è¯¢è¿è´¹æ¨¡æ¿ï¼Œåˆ¤æ–­æ¨¡æ¿æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ç›´æ¥æ–°å¢</span>
        <span class="token comment">//å¦‚æœå­˜åœ¨ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºç»æµåŒºäº’å¯„ï¼Œå¦‚æœä¸æ˜¯ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœæ˜¯ï¼Œéœ€è¦è¿›ä¸€æ­¥åˆ¤æ–­æ‰€å…³è”çš„åŸå¸‚æ˜¯å¦é‡å¤</span>
        <span class="token comment">//å¦‚æœé‡å¤ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœä¸é‡å¤è¿›è¡Œæ–°å¢æˆ–æ›´æ–°</span>
        <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token class-name">Wrappers</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span><span class="token function">lambdaQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getTemplateType</span><span class="token punctuation">,</span> carriageDto<span class="token punctuation">.</span><span class="token function">getTemplateType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getTransportType</span><span class="token punctuation">,</span> <span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">REGULAR_FAST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//æŸ¥è¯¢åˆ°æ¨¡æ¿åˆ—è¡¨</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span> carriageList <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">notEqual</span><span class="token punctuation">(</span>carriageDto<span class="token punctuation">.</span><span class="token function">getTemplateType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">ECONOMIC_ZONE</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// éç»æµåŒºäº’å¯„çš„æƒ…å†µä¸‹ï¼Œéœ€è¦åˆ¤æ–­æŸ¥è¯¢çš„æ¨¡æ¿æ˜¯å¦ä¸ºç©º</span>
            <span class="token comment">// å¦‚æœä¸ä¸ºç©ºå¹¶ä¸”å…¥å‚çš„å‚æ•°idä¸ºç©ºï¼Œè¯´æ˜æ˜¯æ–°å¢æ“ä½œï¼Œéç»æµåŒºåªèƒ½æœ‰ä¸€ä¸ªæ¨¡æ¿ï¼Œéœ€è¦æŠ›å‡ºå¼‚å¸¸</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>carriageList<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>carriageDto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// æ–°å¢æ“ä½œï¼Œæ¨¡æ¿é‡å¤ï¼ŒæŠ›å‡ºå¼‚å¸¸</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SLException</span><span class="token punctuation">(</span><span class="token class-name">CarriageExceptionEnum</span><span class="token punctuation">.</span><span class="token constant">NOT_ECONOMIC_ZONE_REPEAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//æ–°å¢æˆ–æ›´æ–°éç»æµåŒºæ¨¡æ¿</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveOrUpdateCarriage</span><span class="token punctuation">(</span>carriageDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//åˆ¤æ–­æ¨¡æ¿æ‰€å…³è”çš„åŸå¸‚æ˜¯å¦æœ‰é‡å¤</span>
        <span class="token comment">//æŸ¥è¯¢å…¶ä»–æ¨¡æ¿ä¸­æ‰€æœ‰çš„ç»æµåŒºåˆ—è¡¨</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> associatedCityList <span class="token operator">=</span> <span class="token class-name">StreamUtil</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>carriageList<span class="token punctuation">)</span>
                <span class="token comment">//æ’é™¤æ‰è‡ªå·±ï¼Œæ£€æŸ¥ä¸å…¶ä»–æ¨¡æ¿æ˜¯å¦å­˜åœ¨å†²çª</span>
                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>carriageEntity <span class="token operator">-&gt;</span> <span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">notEqual</span><span class="token punctuation">(</span>carriageEntity<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> carriageDto<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//è·å–å…³è”åŸå¸‚</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getAssociatedCity</span><span class="token punctuation">)</span>
                <span class="token comment">//å°†å…³è”åŸå¸‚æŒ‰ç…§é€—å·åˆ†å‰²</span>
                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>associatedCity <span class="token operator">-&gt;</span> <span class="token class-name">StrUtil</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>associatedCity<span class="token punctuation">,</span> <span class="token char">&#39;,&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//å°†ä¸Šé¢å¾—åˆ°çš„é›†åˆå±•å¼€ï¼Œå¾—åˆ°å­—ç¬¦ä¸²</span>
                <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token class-name">StreamUtil</span><span class="token operator">::</span><span class="token function">of</span><span class="token punctuation">)</span>
                <span class="token comment">//æ”¶é›†åˆ°é›†åˆä¸­</span>
                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//æŸ¥çœ‹å½“å‰æ–°å¢ç»æµåŒºæ˜¯å¦å­˜åœ¨é‡å¤ï¼Œå–äº¤é›†æ¥åˆ¤æ–­æ˜¯å¦é‡å¤</span>
        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> intersection <span class="token operator">=</span> <span class="token class-name">CollUtil</span><span class="token punctuation">.</span><span class="token function">intersection</span><span class="token punctuation">(</span>associatedCityList<span class="token punctuation">,</span> carriageDto<span class="token punctuation">.</span><span class="token function">getAssociatedCityList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>intersection<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//æœ‰é‡å¤</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SLException</span><span class="token punctuation">(</span><span class="token class-name">CarriageExceptionEnum</span><span class="token punctuation">.</span><span class="token constant">ECONOMIC_ZONE_CITY_REPEAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//æ–°å¢æˆ–æ›´æ–°ç»æµåŒºæ¨¡æ¿</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">saveOrUpdateCarriage</span><span class="token punctuation">(</span>carriageDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-3ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_5-2-3ã€æµ‹è¯•" aria-hidden="true">#</a> 5.2.3ã€æµ‹è¯•</h3><p>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CarriageService</span> carriageService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">saveOrUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarriageDTO</span> carriageDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CarriageDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setTemplateType</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setTransportType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setAssociatedCityList</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setFirstWeight</span><span class="token punctuation">(</span><span class="token number">12d</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setContinuousWeight</span><span class="token punctuation">(</span><span class="token number">1d</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setLightThrowingCoefficient</span><span class="token punctuation">(</span><span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">CarriageDTO</span> dto <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">saveOrUpdate</span><span class="token punctuation">(</span>carriageDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-3ã€è¿è´¹è®¡ç®—" tabindex="-1"><a class="header-anchor" href="#_5-3ã€è¿è´¹è®¡ç®—" aria-hidden="true">#</a> 5.3ã€è¿è´¹è®¡ç®—</h2><h3 id="_5-3-1ã€æ•´ä½“æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_5-3-1ã€æ•´ä½“æµç¨‹" aria-hidden="true">#</a> 5.3.1ã€æ•´ä½“æµç¨‹</h3><figure><img src="`+C+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="hint-container info"><p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p><p>è¯´æ˜ï¼š</p><ul><li>è¿è´¹æ¨¡æ¿ä¼˜å…ˆçº§ï¼šåŒåŸ&gt;çœå†…&gt;ç»æµåŒºäº’å¯„&gt;è·¨çœ</li><li>å°†ä½“ç§¯è½¬åŒ–æˆé‡é‡ï¼Œä¸é‡é‡æ¯”è¾ƒï¼Œå–å¤§å€¼</li></ul></div><h3 id="_5-3-2ã€æŸ¥æ‰¾æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#_5-3-2ã€æŸ¥æ‰¾æ¨¡æ¿" aria-hidden="true">#</a> 5.3.2ã€æŸ¥æ‰¾æ¨¡æ¿</h3><p>åœ¨ä¸Šè¿°çš„æµç¨‹å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œè®¡ç®—è¿è´¹çš„ç¬¬ä¸€æ­¥é€»è¾‘å°±æ˜¯éœ€è¦æŸ¥æ‰¾åˆ°å¯¹åº”çš„è¿è´¹æ¨¡æ¿ï¼Œå¦åˆ™ä¸èƒ½è¿›è¡Œè®¡ç®—ï¼Œå¦‚ä½•å®ç°æ¯”è¾ƒå¥½å‘¢ï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨ã€è´£ä»»é“¾ã€‘æ¨¡å¼è¿›è¡Œä»£ç ç¼–å†™ã€‚<br> ä¹‹æ‰€ä»¥é‡‡ç”¨ã€è´£ä»»é“¾ã€‘æ¨¡å¼ï¼Œæ˜¯å› ä¸ºåœ¨æŸ¥æ‰¾æ¨¡æ¿æ—¶ï¼Œä¸åŒçš„æ¨¡æ¿å¤„ç†é€»è¾‘ä¸åŒï¼Œå¹¶ä¸”è¿™äº›é€»è¾‘ç»„æˆäº†ä¸€æ¡å¤„ç†é“¾ï¼Œæœ‰å¼€å¤´æœ‰ç»“å°¾ï¼Œåªè¦èƒ½æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ¨¡æ¿å³ç»“æŸã€‚</p><p>é¦–å…ˆï¼Œå®šä¹‰è¿è´¹æ¨¡æ¿å¤„ç†é“¾ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * è¿è´¹æ¨¡æ¿å¤„ç†é“¾çš„æŠ½è±¡å®šä¹‰
 */</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractCarriageChainHandler</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">AbstractCarriageChainHandler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æ‰§è¡Œè¿‡æ»¤æ–¹æ³•ï¼Œé€šè¿‡è¾“å…¥å‚æ•°æŸ¥æ‰¾è¿è´¹æ¨¡æ¿
     *
     * <span class="token keyword">@param</span> <span class="token parameter">waybillDTO</span> è¾“å…¥å‚æ•°
     * <span class="token keyword">@return</span> è¿è´¹æ¨¡æ¿
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">CarriageEntity</span> <span class="token function">doHandler</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æ‰§è¡Œä¸‹ä¸€ä¸ªå¤„ç†å™¨
     *
     * <span class="token keyword">@param</span> <span class="token parameter">waybillDTO</span>     è¾“å…¥å‚æ•°
     * <span class="token keyword">@param</span> <span class="token parameter">carriageEntity</span> ä¸Šä¸ªhandlerå¤„ç†å¾—åˆ°çš„å¯¹è±¡
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token keyword">protected</span> <span class="token class-name">CarriageEntity</span> <span class="token function">doNextHandler</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">,</span> <span class="token class-name">CarriageEntity</span> carriageEntity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextHandler <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> carriageEntity <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//å¦‚æœä¸‹æ¸¸Handlerä¸ºç©º æˆ– ä¸Šä¸ªHandlerå·²ç»æ‰¾åˆ°è¿è´¹æ¨¡æ¿å°±è¿”å›</span>
            <span class="token keyword">return</span> carriageEntity<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> nextHandler<span class="token punctuation">.</span><span class="token function">doHandler</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è®¾ç½®ä¸‹æ¸¸Handler
     *
     * <span class="token keyword">@param</span> <span class="token parameter">nextHandler</span> ä¸‹æ¸¸Handler
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">AbstractCarriageChainHandler</span> nextHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢é’ˆå¯¹ä¸åŒçš„æ¨¡æ¿ç­–ç•¥ç¼–å†™å…·ä½“çš„å®ç°ç±»ï¼ŒåŒåŸå¯„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">CarriageConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">CarriageService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>transport<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ObjectUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * åŒåŸå¯„
 */</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">//å®šä¹‰é¡ºåº</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SameCityChainHandler</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCarriageChainHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CarriageService</span> carriageService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageEntity</span> <span class="token function">doHandler</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarriageEntity</span> carriageEntity <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">.</span><span class="token function">getReceiverCityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> waybillDTO<span class="token punctuation">.</span><span class="token function">getSenderCityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//åŒåŸ</span>
            carriageEntity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">findByTemplateType</span><span class="token punctuation">(</span><span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">SAME_CITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">doNextHandler</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">,</span> carriageEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœå†…å¯„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>base<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">AreaFeign</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">CarriageConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">CarriageService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>transport<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ObjectUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * çœå†…å¯„
 */</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">//å®šä¹‰é¡ºåº</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SameProvinceChainHandler</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCarriageChainHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CarriageService</span> carriageService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">AreaFeign</span> areaFeign<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageEntity</span> <span class="token function">doHandler</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarriageEntity</span> carriageEntity <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–æ”¶å¯„ä»¶åœ°å€çœä»½id</span>
        <span class="token class-name">Long</span> receiverProvinceId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>areaFeign<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">.</span><span class="token function">getReceiverCityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Long</span> senderProvinceId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>areaFeign<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">.</span><span class="token function">getSenderCityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>receiverProvinceId<span class="token punctuation">,</span> senderProvinceId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//çœå†…</span>
            carriageEntity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">findByTemplateType</span><span class="token punctuation">(</span><span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">SAME_PROVINCE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">doNextHandler</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">,</span> carriageEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»æµåŒºäº’å¯„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EnumUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>conditions<span class="token punctuation">.</span>query<span class="token punctuation">.</span></span><span class="token class-name">LambdaQueryWrapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>baomidou<span class="token punctuation">.</span>mybatisplus<span class="token punctuation">.</span>core<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span></span><span class="token class-name">Wrappers</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>base<span class="token punctuation">.</span>api<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">AreaFeign</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">CarriageConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>enums<span class="token punctuation">.</span></span><span class="token class-name">EconomicRegionEnum</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">CarriageService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>transport<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ObjectUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedHashMap</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * ç»æµåŒºäº’å¯„
 */</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token comment">//å®šä¹‰é¡ºåº</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EconomicZoneChainHandler</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCarriageChainHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CarriageService</span> carriageService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">AreaFeign</span> areaFeign<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageEntity</span> <span class="token function">doHandler</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarriageEntity</span> carriageEntity <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token comment">// è·å–æ”¶å¯„ä»¶åœ°å€çœä»½id</span>
        <span class="token class-name">Long</span> receiverProvinceId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>areaFeign<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">.</span><span class="token function">getReceiverCityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Long</span> senderProvinceId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>areaFeign<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">.</span><span class="token function">getSenderCityId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getParentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è·å–ç»æµåŒºåŸå¸‚é…ç½®æšä¸¾</span>
        <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">EconomicRegionEnum</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">EconomicRegionMap</span> <span class="token operator">=</span> <span class="token class-name">EnumUtil</span><span class="token punctuation">.</span><span class="token function">getEnumMap</span><span class="token punctuation">(</span><span class="token class-name">EconomicRegionEnum</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">EconomicRegionEnum</span> economicRegionEnum <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">EconomicRegionEnum</span> regionEnum <span class="token operator">:</span> <span class="token class-name">EconomicRegionMap</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//è¯¥ç»æµåŒºæ˜¯å¦å…¨éƒ¨åŒ…å«æ”¶å‘ä»¶çœid</span>
            <span class="token keyword">boolean</span> result <span class="token operator">=</span> <span class="token class-name">ArrayUtil</span><span class="token punctuation">.</span><span class="token function">containsAll</span><span class="token punctuation">(</span>regionEnum<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> receiverProvinceId<span class="token punctuation">,</span> senderProvinceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                economicRegionEnum <span class="token operator">=</span> regionEnum<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>economicRegionEnum<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//æ ¹æ®ç±»å‹ç¼–ç æŸ¥è¯¢</span>
            <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token class-name">Wrappers</span><span class="token punctuation">.</span><span class="token function">lambdaQuery</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getTemplateType</span><span class="token punctuation">,</span> <span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">ECONOMIC_ZONE</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getTransportType</span><span class="token punctuation">,</span> <span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">REGULAR_FAST</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token class-name">CarriageEntity</span><span class="token operator">::</span><span class="token function">getAssociatedCity</span><span class="token punctuation">,</span> economicRegionEnum<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            carriageEntity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">getOne</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token function">doNextHandler</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">,</span> carriageEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·¨çœå¯„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">CarriageConstant</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">CarriageService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Order</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * è·¨çœ
 */</span>
<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span> <span class="token comment">//å®šä¹‰é¡ºåº</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransProvinceChainHandler</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCarriageChainHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CarriageService</span> carriageService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageEntity</span> <span class="token function">doHandler</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CarriageEntity</span> carriageEntity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">findByTemplateType</span><span class="token punctuation">(</span><span class="token class-name">CarriageConstant</span><span class="token punctuation">.</span><span class="token constant">TRANS_PROVINCE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">doNextHandler</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">,</span> carriageEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»„è£…å¤„ç†é“¾ï¼ŒæŒ‰ç…§<code>@Order</code>æ³¨è§£ä¸­çš„å€¼ï¼Œç”±å°åˆ°å¤§æ’åºã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>collection<span class="token punctuation">.</span></span><span class="token class-name">CollUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>transport<span class="token punctuation">.</span>common<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span><span class="token class-name">SLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * æŸ¥æ‰¾è¿è´¹æ¨¡æ¿å¤„ç†é“¾ @Orderæ³¨è§£
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CarriageChainHandler</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * åˆ©ç”¨Springæ³¨å…¥ç‰¹æ€§ï¼ŒæŒ‰ç…§ @Order ä»å°åˆ°è¾¾æ’åºæ³¨å…¥åˆ°é›†åˆä¸­
     */</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AbstractCarriageChainHandler</span><span class="token punctuation">&gt;</span></span> chainHandlers<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">AbstractCarriageChainHandler</span> firstHandler<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * ç»„è£…å¤„ç†é“¾
     */</span>
    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">constructChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>chainHandlers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SLException</span><span class="token punctuation">(</span><span class="token string">&quot;not found carriage chain handler!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//å¤„ç†é“¾ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span>
        firstHandler <span class="token operator">=</span> chainHandlers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> chainHandlers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> chainHandlers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//æœ€åä¸€ä¸ªå¤„ç†é“¾èŠ‚ç‚¹</span>
                chainHandlers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//è®¾ç½®ä¸‹æ¸¸èŠ‚ç‚¹</span>
                chainHandlers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>chainHandlers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">CarriageEntity</span> <span class="token function">findCarriage</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å¤„ç†</span>
        <span class="token keyword">return</span> firstHandler<span class="token punctuation">.</span><span class="token function">doHandler</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>handler</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">WaybillDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sl<span class="token punctuation">.</span>ms<span class="token punctuation">.</span>carriage<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CarriageEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">CarriageChainHandlerTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CarriageChainHandler</span> carriageChainHandler<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">findCarriage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WaybillDTO</span> waybillDTO <span class="token operator">=</span> <span class="token class-name">WaybillDTO</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">senderCityId</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span> <span class="token comment">//åŒ—äº¬</span>
                <span class="token punctuation">.</span><span class="token function">receiverCityId</span><span class="token punctuation">(</span><span class="token number">161793L</span><span class="token punctuation">)</span> <span class="token comment">//ä¸Šæµ·</span>
                <span class="token punctuation">.</span><span class="token function">volume</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">weight</span><span class="token punctuation">(</span><span class="token number">1d</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">CarriageEntity</span> carriage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageChainHandler<span class="token punctuation">.</span><span class="token function">findCarriage</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>carriage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨å…¥çš„å¤„ç†é“¾é›†åˆå¯¹è±¡ï¼š<br><img src="`+T+'" alt="" loading="lazy"><br> æµ‹è¯•ç»“æœï¼ŒæŸ¥è¯¢åˆ°è·¨çœçš„æ¨¡æ¿ï¼Œç»“æœç¬¦åˆé¢„æœŸï¼š<br><img src="'+O+`" alt="" loading="lazy"></p><h3 id="_5-3-3ã€è®¡ç®—è¿è´¹" tabindex="-1"><a class="header-anchor" href="#_5-3-3ã€è®¡ç®—è¿è´¹" aria-hidden="true">#</a> 5.3.3ã€è®¡ç®—è¿è´¹</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">CarriageDTO</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//æ ¹æ®å‚æ•°æŸ¥æ‰¾è¿è´¹æ¨¡æ¿</span>
        <span class="token class-name">CarriageEntity</span> carriage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageChainHandler<span class="token punctuation">.</span><span class="token function">findCarriage</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è®¡ç®—é‡é‡ï¼Œç¡®ä¿æœ€å°é‡é‡ä¸º1kg</span>
        <span class="token keyword">double</span> computeWeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getComputeWeight</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">,</span> carriage<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è®¡ç®—è¿è´¹ï¼Œé¦–é‡ + ç»­é‡</span>
        <span class="token keyword">double</span> expense <span class="token operator">=</span> carriage<span class="token punctuation">.</span><span class="token function">getFirstWeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>computeWeight <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> carriage<span class="token punctuation">.</span><span class="token function">getContinuousWeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ä¿ç•™ä¸€ä½å°æ•°</span>
        expense <span class="token operator">=</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>expense<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å°è£…è¿è´¹å’Œè®¡ç®—é‡é‡åˆ°DTOï¼Œå¹¶è¿”å›</span>
        <span class="token class-name">CarriageDTO</span> carriageDTO <span class="token operator">=</span> <span class="token class-name">CarriageUtils</span><span class="token punctuation">.</span><span class="token function">toDTO</span><span class="token punctuation">(</span>carriage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setExpense</span><span class="token punctuation">(</span>expense<span class="token punctuation">)</span><span class="token punctuation">;</span>
        carriageDTO<span class="token punctuation">.</span><span class="token function">setComputeWeight</span><span class="token punctuation">(</span>computeWeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> carriageDTO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æ ¹æ®ä½“ç§¯å‚æ•°ä¸å®é™…é‡é‡è®¡ç®—è®¡è´¹é‡é‡
     *
     * <span class="token keyword">@param</span> <span class="token parameter">waybillDTO</span> è¿è´¹è®¡ç®—å¯¹è±¡
     * <span class="token keyword">@param</span> <span class="token parameter">carriage</span>   è¿è´¹æ¨¡æ¿
     * <span class="token keyword">@return</span> è®¡è´¹é‡é‡
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> <span class="token function">getComputeWeight</span><span class="token punctuation">(</span><span class="token class-name">WaybillDTO</span> waybillDTO<span class="token punctuation">,</span> <span class="token class-name">CarriageEntity</span> carriage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è®¡ç®—ä½“ç§¯ï¼Œå¦‚æœä¼ å…¥ä½“ç§¯ä¸éœ€è¦è®¡ç®—</span>
        <span class="token class-name">Integer</span> volume <span class="token operator">=</span> waybillDTO<span class="token punctuation">.</span><span class="token function">getVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>volume<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">//é•¿*å®½*é«˜è®¡ç®—ä½“ç§¯</span>
                volume <span class="token operator">=</span> waybillDTO<span class="token punctuation">.</span><span class="token function">getMeasureLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> waybillDTO<span class="token punctuation">.</span><span class="token function">getMeasureWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> waybillDTO<span class="token punctuation">.</span><span class="token function">getMeasureHigh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//è®¡ç®—å‡ºé”™è®¾ç½®ä½“ç§¯ä¸º0</span>
                volume <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// è®¡ç®—ä½“ç§¯é‡é‡ï¼Œä½“ç§¯ / è½»æŠ›ç³»æ•°</span>
        <span class="token class-name">BigDecimal</span> volumeWeight <span class="token operator">=</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span>volume<span class="token punctuation">,</span> carriage<span class="token punctuation">.</span><span class="token function">getLightThrowingCoefficient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å–å¤§å€¼</span>
        <span class="token keyword">double</span> computeWeight <span class="token operator">=</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>volumeWeight<span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">.</span><span class="token function">getWeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è®¡ç®—ç»­é‡ï¼Œè§„åˆ™ï¼šä¸æ»¡1kgï¼ŒæŒ‰1kgè®¡è´¹ï¼›10kgä»¥ä¸‹ç»­é‡ä»¥0.1kgè®¡é‡ä¿ç•™1ä½å°æ•°ï¼›10-100kgç»­é‡ä»¥0.5kgè®¡é‡ä¿ç•™1ä½å°æ•°ï¼›100kgä»¥ä¸Šå››èˆäº”å…¥å–æ•´</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>computeWeight <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>computeWeight <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> computeWeight<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// ä¸¾ä¾‹ï¼š</span>
        <span class="token comment">// 108.4kgæŒ‰ç…§108kgæ”¶è´¹</span>
        <span class="token comment">// 108.5kgæŒ‰ç…§109kgæ”¶è´¹</span>
        <span class="token comment">// 108.6kgæŒ‰ç…§109kgæ”¶è´¹</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>computeWeight <span class="token operator">&gt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>computeWeight<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doubleValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//0.5ä¸ºä¸€ä¸ªè®¡ç®—å•ä½ï¼Œä¸¾ä¾‹ï¼š</span>
        <span class="token comment">// 18.8kgæŒ‰ç…§19æ”¶è´¹ï¼Œ</span>
        <span class="token comment">// 18.4kgæŒ‰ç…§18.5kgæ”¶è´¹</span>
        <span class="token comment">// 18.1kgæŒ‰ç…§18.5kgæ”¶è´¹</span>
        <span class="token comment">// 18.6kgæŒ‰ç…§19æ”¶è´¹</span>
        <span class="token keyword">int</span> integer <span class="token operator">=</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>computeWeight<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">RoundingMode</span><span class="token punctuation">.</span><span class="token constant">DOWN</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>computeWeight<span class="token punctuation">,</span> integer<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> integer<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>computeWeight<span class="token punctuation">,</span> integer<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>integer<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">NumberUtil</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>integer<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-4ã€æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_5-3-4ã€æµ‹è¯•" aria-hidden="true">#</a> 5.3.4ã€æµ‹è¯•</h3><p>å¯ä»¥é€šè¿‡å•å…ƒæµ‹è¯•æˆ–è€…swaggeræµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">compute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WaybillDTO</span> waybillDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WaybillDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        waybillDTO<span class="token punctuation">.</span><span class="token function">setReceiverCityId</span><span class="token punctuation">(</span><span class="token number">7363L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å¤©æ´¥</span>
        waybillDTO<span class="token punctuation">.</span><span class="token function">setSenderCityId</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åŒ—äº¬</span>
        waybillDTO<span class="token punctuation">.</span><span class="token function">setWeight</span><span class="token punctuation">(</span><span class="token number">3.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//é‡é‡</span>
        waybillDTO<span class="token punctuation">.</span><span class="token function">setVolume</span><span class="token punctuation">(</span><span class="token number">125000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä½“ç§¯</span>

        <span class="token class-name">CarriageDTO</span> compute <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>carriageService<span class="token punctuation">.</span><span class="token function">compute</span><span class="token punctuation">(</span>waybillDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>compute<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+_+'" alt="" loading="lazy"><br><img src="'+E+`" alt="" loading="lazy"><br> å¯ä»¥çœ‹åˆ°å·²ç»å¾—åˆ°è®¡ç®—ç»“æœã€‚</p><h3 id="_5-3-5ã€å¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#_5-3-5ã€å¼‚å¸¸" aria-hidden="true">#</a> 5.3.5ã€å¼‚å¸¸</h3><p>å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹å¼‚å¸¸ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2022</span>-08-04 <span class="token number">19</span>:27:01.712 - <span class="token punctuation">[</span>http-nio-18094-exec-6<span class="token punctuation">]</span> - ERROR - c.s.t.common.handler.GlobalExceptionHandler - å…¶ä»–æœªçŸ¥å¼‚å¸¸ -<span class="token operator">&gt;</span> 
feign.RetryableException: Connection refused: connect executing GET http://sl-express-ms-base/area/72975
	at feign.FeignException.errorExecuting<span class="token punctuation">(</span>FeignException.java:268<span class="token punctuation">)</span>
	at feign.SynchronousMethodHandler.executeAndDecode<span class="token punctuation">(</span>SynchronousMethodHandler.java:129<span class="token punctuation">)</span>
	at feign.SynchronousMethodHandler.invoke<span class="token punctuation">(</span>SynchronousMethodHandler.java:89<span class="token punctuation">)</span>
	at feign.ReflectiveFeign<span class="token variable">$FeignInvocationHandler</span>.invoke<span class="token punctuation">(</span>ReflectiveFeign.java:100<span class="token punctuation">)</span>
	at com.sun.proxy.<span class="token variable">$Proxy120</span>.get<span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
	at com.sl.ms.carriage.service.impl.CarriageServiceImpl.findEconomicCarriage<span class="token punctuation">(</span>CarriageServiceImpl.java:234<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºåœ¨è®¡ç®—æœåŠ¡ä¸­ä½¿ç”¨baseå¾®æœåŠ¡ï¼Œä½†æ˜¯101æœºå™¨çš„baseæœåŠ¡æ²¡æœ‰å¯åŠ¨ï¼Œä¼šå¯¼è‡´å¦‚ä¸Šå¼‚å¸¸ï¼Œå°†baseå¯åŠ¨å³å¯ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#å¯åŠ¨å‘½ä»¤</span>
<span class="token function">docker</span> start sl-express-ms-base-service

<span class="token comment">#æŸ¥çœ‹æ—¥å¿—</span>
<span class="token function">docker</span> logs <span class="token parameter variable">-f</span> sl-express-ms-base-service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3-6ã€æµ‹è¯•ä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#_5-3-6ã€æµ‹è¯•ä¸¾ä¾‹" aria-hidden="true">#</a> 5.3.6ã€æµ‹è¯•ä¸¾ä¾‹</h3><p>**ä¸¾ä¾‹1ï¼š**è·¨çœå¯„ï¼ˆä¸è¶³1kgï¼‰<br> ä»åŒ—äº¬å¯„åˆ°ä¸Šæµ·ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡0.8åƒå…‹ï¼Œ1ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š1cm<em>1cm</em>1cmï¼‰ï¼š<br> è®¡ç®—ï¼š<br> é‡é‡ï¼šä¸è¶³1åƒå…‹æŒ‰ç…§ä¸€åƒå…‹è®¡ç®—<br> ä½“ç§¯ï¼šè·¨çœè½»æŠ›ç³»æ•°ä¸º12000ï¼Œ1ç«‹æ–¹å˜ç±³è®¡ç®—åˆ™ä¸ºï¼š1/12000<br> å¯¹æ¯”é‡é‡å’Œä½“ç§¯ï¼Œå–å¤§å€¼<br> æŒ‰ç…§1å…¬æ–¤æ¥è®¡ç®—ï¼Œåˆ™è¿è´¹ä¸ºè·¨çœå¯„è¿è´¹ï¼Œ18å…ƒ</p><hr><p>**ä¸¾ä¾‹2ï¼š**è·¨çœå¯„(è¶…è¿‡ 1kg)<br> ä»åŒ—äº¬å¯„åˆ°ä¸Šæµ·ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡1.8åƒå…‹ï¼Œ1ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š1cm<em>1cm</em>1cmï¼‰ï¼š<br> è®¡ç®—ï¼š<br> é‡é‡ï¼š1.8åƒå…‹<br> ä½“ç§¯ï¼šè·¨çœè½»æŠ›ç³»æ•°ä¸º12000ï¼Œ1ç«‹æ–¹å˜ç±³è®¡ç®—åˆ™ä¸ºï¼š1/12000<br> å¯¹æ¯”é‡é‡å’Œä½“ç§¯ï¼Œå–å¤§å€¼<br> æŒ‰ç…§1.8å…¬æ–¤æ¥è®¡ç®—è¿è´¹ï¼Œåˆ™è¿è´¹ä¸ºè·¨çœå¯„è¿è´¹ï¼Œ<br> 1å…¬æ–¤ï¼ˆé¦–é‡ï¼‰+0.8å…¬æ–¤ï¼ˆç»­é‡ï¼‰<br> æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10å…¬æ–¤ä»¥ä¸‹ä»¥0.1ä¸ºç»­é‡å•ä½ï¼Œåˆ™<br> é¦–é‡+ç»­é‡=1<em>18ï¼ˆé¦–é‡ä»·æ ¼ï¼‰+0.8</em>5=18+4=22å…ƒ</p><hr><p>**ä¸¾ä¾‹3ï¼š**è·¨çœå¯„ï¼ˆæŒ‰ä½“ç§¯è®¡è´¹ï¼‰<br> ä»åŒ—äº¬å¯„åˆ°ä¸Šæµ·ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8åƒå…‹ï¼Œ125000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>50cm</em>50cmï¼‰ï¼š<br> è®¡ç®—ï¼š<br> é‡é‡ï¼š3.8åƒå…‹=3ï¼ˆé¦–é‡ï¼‰+0.8ï¼ˆç»­é‡ï¼‰<br> ä½“ç§¯ï¼šè·¨çœè½»æŠ›ç³»æ•°ä¸º12000ï¼Œ125000ç«‹æ–¹å˜ç±³ï¼š125000/12000=10.41<br> å¯¹æ¯”é‡é‡å’Œä½“ç§¯ï¼Œå–å¤§å€¼10.41<br> æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10-100å…¬æ–¤ä»¥0.5ä¸ºè®¡é‡å•ä½ï¼Œåˆ™10.41ä¸º10.5<br> é¦–é‡+ç»­é‡=1<em>18ï¼ˆé¦–é‡ä»·æ ¼ï¼‰+9.5</em>5=18+47.5=65.5å…ƒ</p><hr><p>**ä¸¾ä¾‹4ï¼š**åŒåŸå¯„ï¼ˆæŒ‰ä½“ç§¯è®¡è´¹ï¼‰<br> ä»åŒ—äº¬ä¸œåŸå¯„åˆ°åŒ—äº¬è¥¿åŸä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8kgï¼Œ125000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>50cm</em>50cmï¼‰ï¼š<br> è®¡ç®—ï¼š<br> é‡é‡ï¼š3.8kg=1kgï¼ˆé¦–é‡ï¼‰+2.8kgï¼ˆç»­é‡ï¼‰<br> ä½“ç§¯ï¼šåŒåŸè½»æŠ›ç³»æ•°ä¸º12000ï¼Œæ¢ç®—æˆé‡é‡125000ç«‹æ–¹å˜ç±³ï¼š125000/12000=10.41kg<br> å¯¹æ¯”é‡é‡ï¼ˆ3.8kgï¼‰å’Œä½“ç§¯ï¼ˆ10.41kgï¼‰ï¼Œå–å¤§å€¼10.41kg<br> æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10-100kgä»¥0.5kgä¸ºè®¡é‡å•ä½ï¼Œåˆ™10.41kgä¸º10.5kg<br> é¦–é‡+ç»­é‡=1kg<em>12å…ƒï¼ˆé¦–é‡ä»·æ ¼ï¼‰+9.5kg</em>2å…ƒ(ç»­é‡ä»·æ ¼)=12+19=31å…ƒ</p><hr><p>**ä¸¾ä¾‹5ï¼š**ç»æµåŒºäº’å¯„ï¼ˆæŒ‰ä½“ç§¯è®¡è´¹ï¼‰<br> ä»åŒ—äº¬å¯„åˆ°å¤©æ´¥ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8kgï¼Œ125000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>50cm</em>50cmï¼‰ï¼š<br> è®¡ç®—ï¼š<br> é‡é‡ï¼š3.8kg=1kgï¼ˆé¦–é‡ï¼‰+2.8kgï¼ˆç»­é‡ï¼‰<br> ä½“ç§¯ï¼šç»æµåŒºäº’å¯„ï¼ˆäº¬æ´¥ç¿¼ï¼‰è½»æŠ›ç³»æ•°ä¸º6000ï¼Œæ¢ç®—æˆä½“ç§¯125000ç«‹æ–¹å˜ç±³ï¼š125000/6000=20.83kg<br> å¯¹æ¯”é‡é‡(3.8kg)å’Œä½“ç§¯(20.83kg)ï¼Œå–å¤§å€¼20.83kg<br> æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10-100kgä»¥0.5kgä¸ºè®¡é‡å•ä½ï¼Œåˆ™20.83ä¸º21kg<br> é¦–é‡+ç»­é‡=1<em>12å…ƒï¼ˆé¦–é‡ä»·æ ¼ï¼‰+20</em>5å…ƒ(ç»­é‡ä»·æ ¼)=12+100=112å…ƒ</p><hr><p>**ä¸¾ä¾‹6ï¼š**çœå†…å¯„ï¼ˆæŒ‰é‡é‡è®¡è´¹ï¼‰<br> ä»çŸ³å®¶åº„å¯„åˆ°ç§¦çš‡å²›ä¸€ä»¶ç‰©å“ï¼Œç‰©å“é‡é‡3.8kgï¼Œ5000ç«‹æ–¹å˜ç±³ï¼ˆé•¿<em>å®½</em>é«˜ï¼š50cm<em>10cm</em>10cmï¼‰ï¼š<br> è®¡ç®—ï¼š<br> é‡é‡ï¼š3.8kg=1kgï¼ˆé¦–é‡ï¼‰+2.8kgï¼ˆç»­é‡ï¼‰<br> ä½“ç§¯ï¼šçœå†…å¯„è½»æŠ›ç³»æ•°ä¸º8000ï¼Œæ¢ç®—æˆä½“ç§¯5000ç«‹æ–¹å˜ç±³ï¼š5000/6000=0.8kg<br> å¯¹æ¯”é‡é‡(3.8kg)å’Œä½“ç§¯(0.8kg)ï¼Œå–å¤§å€¼3.8kg<br> æ ¹æ®è¿è´¹è®¡ç®—è§„åˆ™ï¼Œ10kgä»¥ä¸‹ä»¥0.1kgä¸ºè®¡é‡å•ä½ï¼Œåˆ™3.8kgä¸º3.8kg<br> é¦–é‡+ç»­é‡=1<em>12å…ƒï¼ˆé¦–é‡ä»·æ ¼ï¼‰+2.8</em>3å…ƒ(ç»­é‡ä»·æ ¼)=12+8.4=20.4å…ƒ</p><h2 id="_5-4ã€éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_5-4ã€éƒ¨ç½²" aria-hidden="true">#</a> 5.4ã€éƒ¨ç½²</h2><p>å·²ç»å°†è¯¥æœåŠ¡çš„éƒ¨ç½²è„šæœ¬å†™åˆ°Jenkinsä¸­ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><figure><img src="`+x+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>éƒ¨ç½²æˆåŠŸåè¿›è¡Œæµ‹è¯•ï¼Œç»“æœä¸æœ¬åœ°ä¸€æ ·ã€‚</p><h2 id="_5-5ã€ç”¨æˆ·ç«¯æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_5-5ã€ç”¨æˆ·ç«¯æµ‹è¯•" aria-hidden="true">#</a> 5.5ã€ç”¨æˆ·ç«¯æµ‹è¯•</h2>',64),P=n("br",null,null,-1),B={href:"https://www.yuque.com/docs/share/90dee639-d6a5-48c7-a644-4829db1e47ae",target:"_blank",rel:"noopener noreferrer"},V=t('<p>éœ€è¦å¯åŠ¨å¦‚ä¸‹æ‰€éœ€è¦çš„æœåŠ¡ï¼Œè¿›è¡Œæµ‹è¯•ï¼š<br><img src="'+D+'" alt="" loading="lazy"></p><p>å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œæ˜¯å› ä¸º <code>sl-express-ms-oms-service</code> æœåŠ¡æ²¡æœ‰å¯åŠ¨ã€‚</p><figure><img src="'+j+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><figure><img src="'+S+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h1 id="_6ã€ç»ƒä¹ " tabindex="-1"><a class="header-anchor" href="#_6ã€ç»ƒä¹ " aria-hidden="true">#</a> 6ã€ç»ƒä¹ </h1><p>éœ€æ±‚ï¼šè®¡ç®—è¿è´¹çš„ç¬¬ä¸€æ­¥å°±æ˜¯æ ¹æ®å‚æ•°æŸ¥è¯¢è¿è´¹æ¨¡æ¿ï¼Œè€Œè¿™ä¸ªåŠ¨ä½œä¼šè®¿é—®æ•°æ®åº“ï¼Œå¹¶ä¸”æ˜¯æ¯”è¾ƒé¢‘ç¹çš„ï¼Œç„¶è€Œè¿è´¹æ¨¡æ¿çš„å˜æ›´å¹¶ä¸é¢‘ç¹ï¼Œéœ€è¦å¯ä»¥å°†è¿è´¹æ¨¡æ¿ç¼“å­˜èµ·æ¥ï¼Œä»¥æé«˜æ•ˆç‡ã€‚</p><p>æç¤ºï¼š</p><ul><li>éœ€è¦å¼•å…¥redisç›¸å…³çš„ä¾èµ–</li><li>å¢åŠ redisç›¸å…³çš„é…ç½®</li><li>ç¼–ç å®ç°ç¼“å­˜ç›¸å…³é€»è¾‘</li></ul><h1 id="_7ã€é¢è¯•è¿ç¯é—®" tabindex="-1"><a class="header-anchor" href="#_7ã€é¢è¯•è¿ç¯é—®" aria-hidden="true">#</a> 7ã€é¢è¯•è¿ç¯é—®</h1><div class="hint-container info"><p class="hint-container-title">ç›¸å…³ä¿¡æ¯</p><p>é¢è¯•å®˜é—®ï¼š</p><ul><li>ä½ ä»¬çš„è¿è´¹æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Ÿä½“ç§¯å’Œé‡é‡æ€ä¹ˆè®¡ç®—ï¼Œåˆ°åº•ä»¥å“ªä¸ªä¸ºå‡†ï¼Ÿ</li><li>è¯¦ç»†èŠèŠä½ ä»¬çš„è¿è´¹æ¨¡æ¿æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</li><li>æœ‰æ²¡æœ‰é’ˆå¯¹è¿è´¹è®¡ç®—åšä»€ä¹ˆä¼˜åŒ–ï¼Ÿ</li></ul></div>',11);function G(Q,Y){const a=c("ExternalLinkIcon");return o(),i("div",null,[N,n("table",null,[H,n("tbody",null,[n("tr",null,[W,n("td",null,[n("a",R,[s("http://git.sl-express.com/sl/sl-express-ms-carriage-domain.git"),p(a)])])]),n("tr",null,[U,n("td",null,[n("a",A,[s("http://git.sl-express.com/sl/sl-express-ms-carriage-api.git"),p(a)])])]),n("tr",null,[I,n("td",null,[n("a",M,[s("http://git.sl-express.com/sl/sl-express-ms-carriage-service.git"),p(a)])])])])]),q,n("p",null,[s("urlåœ°å€ï¼š"),n("a",F,[s("http://127.0.0.1:18094/doc.html"),p(a)])]),z,n("p",null,[s("ç”¨æˆ·ä¸‹å•æ—¶ï¼Œéœ€è¦æ ¹æ®æ”¶å‘åœ°å€è®¡ç®—è¿è´¹ï¼Œæ‰€ä»¥éœ€è¦å°†ç”¨æˆ·ç«¯è¿è¡Œèµ·æ¥è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€‚"),P,s(" ç”¨æˆ·ç«¯çš„éƒ¨ç½²å‚è€ƒ"),n("a",B,[s("ã€Šå‰ç«¯éƒ¨ç½²æ–‡æ¡£ã€‹"),p(a)]),s("ã€‚")]),V])}const $=e(L,[["render",G],["__file","day04-è¿è´¹å¾®æœåŠ¡.html.vue"]]);export{$ as default};
