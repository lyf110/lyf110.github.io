import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o,c as t,a as e,b as n,d as i,e as a}from"./app-5f6064b2.js";const d="/assets/1559898133531-0a9614bf.png",l="/assets/1559887294414-6c6f2844.png",p="/assets/1559887326317-27a692b4.png",u="/assets/1559887494005-eac02489.png",k="/assets/1559888437272-ae7230b3.png",v="/assets/1559888748414-5daf4edf.png",m="/assets/1559893092970-c29e4c58.png",h="/assets/1559893104724-64746e0c.png",b="/assets/1559893114418-043ea97c.png",g="/assets/1559893171524-7007a12d.png",f="/assets/1560061407995-6e3c1600.png",_="/assets/1559890995769-e392c051.png",D={},y=a('<h1 id="docker-一" tabindex="-1"><a class="header-anchor" href="#docker-一" aria-hidden="true">#</a> docker（一）</h1><p>课程目标：</p><p>1、什么是虚拟化</p><p>2、docker介绍</p><p>3、docker版本以及安装</p><p>4、docker架构</p><p>5、docker镜像操作</p><p>6、docker容器操作</p><h1 id="_1-什么是虚拟化" tabindex="-1"><a class="header-anchor" href="#_1-什么是虚拟化" aria-hidden="true">#</a> 1 什么是虚拟化</h1><h2 id="_1-1-概念" tabindex="-1"><a class="header-anchor" href="#_1-1-概念" aria-hidden="true">#</a> 1.1 概念</h2><p>在计算机中，虚拟化（英语：Virtualization）是一种资源管理技术，是将计算机的各种实体资源，如服务器、网络、内存及存储等，予以抽象、转换后呈现出来，<strong>打破实体结构间的不可切割的障碍，使用户可以比原本的组态更好的方式来应用这些资源</strong>。这些资源的新虚拟部份是不受现有资源的架设方式，地域或物理组态所限制。一般所指的虚拟化资源包括计算能力和资料存储。</p><p>在实际的生产环境中，<strong>虚拟化技术主要用来解决高性能的物理硬件产能过剩和老的旧的硬件产能过低的重组重用</strong>，透明化底层物理硬件，从而最大化的利用物理硬件</p><p>虚拟化技术种类很多，例如：软件虚拟化、硬件虚拟化、内存虚拟化、网络虚拟化、桌面虚拟化、服务虚拟化、<strong>虚拟机</strong>等等。</p><figure><img src="'+d+'" alt="1559898133531" tabindex="0" loading="lazy"><figcaption>1559898133531</figcaption></figure><h2 id="_1-2-虚拟化架构" tabindex="-1"><a class="header-anchor" href="#_1-2-虚拟化架构" aria-hidden="true">#</a> 1.2 虚拟化架构</h2><h3 id="_1-2-1-全虚拟化" tabindex="-1"><a class="header-anchor" href="#_1-2-1-全虚拟化" aria-hidden="true">#</a> 1.2.1 全虚拟化</h3><p>在全虚拟化的虚拟平台中，GuestOS并不知道自己是一台虚拟机，它会认为自己就是运行在计算机物理硬件设备上的HostOS。因为全虚拟化的VMM会将一个OS所能够操作的CPU、内存、外设等物理设备逻辑抽象成为虚拟CPU、虚拟内存、虚拟外设等虚拟设备后，再交由GuestOS来操作使用。这样的GuestOS会将底层硬件平台视为自己所有的，但是实际上，这些都是VMM为GuestOS制造了这种假象。</p><figure><img src="'+l+'" alt="1559887294414" tabindex="0" loading="lazy"><figcaption>1559887294414</figcaption></figure><h3 id="_1-2-2-操作系统虚拟化" tabindex="-1"><a class="header-anchor" href="#_1-2-2-操作系统虚拟化" aria-hidden="true">#</a> 1.2.2 操作系统虚拟化</h3><p>操作系统层虚拟化是指通过划分一个宿主操作系统的特定部分，产生一个个隔离的操作执行环境。操作系统层的虚拟化是操作系统内核直接提供的虚报化，虚拟出的操作系统之间共享底层宿主操作系统内核和底层的硬件资源。操作系统虚拟化的关键点在于将操作系统与上层应用隔离开，将对操作系统资源的访问进行虚报化，使上层应用觉得自己独占操作系统。</p><figure><img src="'+p+'" alt="1559887326317" tabindex="0" loading="lazy"><figcaption>1559887326317</figcaption></figure><h3 id="_1-2-3-平台虚拟化" tabindex="-1"><a class="header-anchor" href="#_1-2-3-平台虚拟化" aria-hidden="true">#</a> 1.2.3 平台虚拟化</h3><p>平台虚拟化表现为在一个给定的硬件平台上宿主机创造一个模拟的计算机环境虚拟机提供给客户机。客户机软件对于用户应用程序没有限制;许多宿主机允许运行真实的操作系统。客户机就好像直接运行在计算机硬件上，伴随着几个明显的警告。虚拟机对硬件资源(如网络，显示器，键盘，硬盘)的访问被统一管理在一个比处理器和系统内存更有限制性的层次上。客户软件经常被限制访问计算机周边设备，或者被限制在较低的设备性能上，这取决于宿主机硬件访问策略设定。</p><figure><img src="'+u+'" alt="1559887494005" tabindex="0" loading="lazy"><figcaption>1559887494005</figcaption></figure><h2 id="_1-3-hypervisor" tabindex="-1"><a class="header-anchor" href="#_1-3-hypervisor" aria-hidden="true">#</a> 1.3 hypervisor</h2><p>Hypervisor是一种运行在物理服务器和操作系统之间的中间软件层,可允许多个操作系统和应用共享一套基础物理硬件，因此也可以看作是虚拟环境中的“元”操作系统，它可以协调访问服务器上的所有物理设备和虚拟机，也叫**虚拟机监视器（<strong>Virtual Machine Monitor，VMM）</strong>。Hypervisor是所有虚拟化技术的核心。**当服务器启动并执行Hypervisor时，它会给每一台虚拟机分配适量的内存、CPU、网络和磁盘，并加载所有虚拟机的客户操作系统。</p><p>Hypervisor是所有虚拟化技术的核心，软硬件架构和管理更高效、更灵活，硬件的效能能够更好地发挥出来。常见的产品有：VMware、KVM、Xen等等。</p><h1 id="_2-docker介绍" tabindex="-1"><a class="header-anchor" href="#_2-docker介绍" aria-hidden="true">#</a> 2 docker介绍</h1><h2 id="_2-1-容器技术" tabindex="-1"><a class="header-anchor" href="#_2-1-容器技术" aria-hidden="true">#</a> 2.1 容器技术</h2><p>在计算机的世界中，容器拥有一段漫长且传奇的历史。容器与管理程序虚拟化（hypervisor virtualization，HV）有所不同，<strong>管理程序虚拟化通过中间层将一台或者多台独立的机器虚拟运行与物理硬件之上，而容器则是直接运行在操作系统内核之上的用户空间</strong>。因此，容器虚拟化也被称为“操作系统级虚拟化”，容器技术可以让多个独立的用户空间运行在同一台宿主机上。</p><p>由于“客居”于操作系统，容器只能运行与底层宿主机相同或者相似的操作系统，这看起来并不是非常灵活。例如：可以在Ubuntu服务中运行Redhat Enterprise Linux，但无法再Ubuntu服务器上运行Microsoft Windows。</p><p>相对于彻底隔离的管理程序虚拟化，容器被认为是不安全的。而反对这一观点的人则认为，由于虚拟容器所虚拟的是一个完整的操作系统，这无疑增大了攻击范围，而且还要考虑管理程序层潜在的暴露风险。</p><p>尽管有诸多局限性，容器还是被广泛部署于各种各样的应用场合。在超大规模的多租户服务部署、轻量级沙盒以及对安全要求不太高的隔离环境中，容器技术非常流行。最常见的一个例子就是“权限隔离监牢”（chroot jail），它创建一个隔离的目录环境来运行进程。如果权限隔离监牢正在运行的进程被入侵者攻破，入侵者便会发现自己“身陷囹圄”，因为权限不足被困在容器所创建的目录中，无法对宿主机进一步破坏。</p><p>最新的容器技术引入了OpenVZ、Solaris Zones以及Linux容器（LXC）。使用这些新技术，容器不在仅仅是一个单纯的运行环境。在自己的权限类内，<strong>容器更像是一个完整的宿主机</strong>。<strong>容器和宿主机之间的隔离更加彻底，容器有独立的网络和存储栈，还拥有自己的资源管理能力，使得同一台宿主机中的多个容器可以友好的共存</strong>。</p><p>容器被认为是精益技术，因为容器需要的开销有限。和传统虚拟化以及半虚拟化相比，容器不需要模拟层（emulation layer）和管理层（hypervisor layer），而是使用操作系统的系统调用接口。这<strong>降低了运行单个容器所需的开销</strong>，也<strong>使得宿主机中可以运行更多的容器</strong>。</p><p>尽管有着光辉的历史，容器仍未得到广泛的认可。一个很重要的原因就是容器技术的复杂性：容器本身就比较复杂，不易安装，管理和自动化也很困难。而Docker就是为了改变这一切而生的。</p><p><code>&lt;https://www.cnblogs.com/kevingrace&gt; </code></p><h2 id="_2-2-docker介绍" tabindex="-1"><a class="header-anchor" href="#_2-2-docker介绍" aria-hidden="true">#</a> 2.2 docker介绍</h2><p>Docker is an open platform for developing, shipping, and running applications. Docker enables you to separate your applications from your infrastructure so you can deliver software quickly. With Docker, you can manage your infrastructure in the same ways you manage your applications. By taking advantage of Docker’s methodologies for shipping, testing, and deploying code quickly, you can significantly reduce the delay between writing code and running it in production.</p><p>Docker是一个开发，运输和运行应用程序的开放平台。 Docker使您可以将应用程序与基础架构分离，以便快速交付软件。 使用Docker，您可以像管理应用程序一样管理<strong>基础架构</strong>（OS）。 通过利用Docker的方法快速发送，测试和部署代码，您可以显着减少编写代码和在生产中运行代码之间的延迟。（代码改了）</p><h2 id="_2-3-docker好处" tabindex="-1"><a class="header-anchor" href="#_2-3-docker好处" aria-hidden="true">#</a> 2.3 docker好处</h2><p>容器提供了隔离性，结论是，容器可以为各种测试提供很好的<strong>沙盒环境</strong>。并且，容器本身就具有“标准性”的特征，非常适合为服务创建构建块。Docker的一些应用场景如下：</p><ul><li><p>加速本地开发和构建流程，使其更加高效、更加轻量化。本地开发人员可以构建、运行并分享Docker容器。容器可以在开发环境中构建，然后轻松的提交到测试环境中，并最终进入生产环境。 开发人员与运维人员进行职责的逻辑分离</p></li><li><p>能够让独立的服务或应用程序在不同的环境中，得到相同的运行结果。这一点在面向服务的架构和重度依赖微型服务的部署由其实用。</p></li><li><p>用Docker创建隔离的环境来进行测试。例如，用Jenkins CI这样的持续集成工具启动一个用于测试的容器。（持续化集成 war 实际部署：jenkins持续化集成 Jenkins + git ）</p></li><li><p>Docker可以让开发者先在本机上构建一个复杂的程序或架构来进行测试，而不是一开始就在生产环境部署、测试。</p></li><li><p>构建一个多用户的平台即服务（<strong>PaaS</strong>）基础设施</p></li><li><p>为开发、测试提供一个轻量级的独立的沙盒环境</p></li><li><p>提供软件即服务（SaaS）应用程序，例如Memcached即服务</p></li><li><p>高性能、超大规模的宿主机部署（可以很多容器）</p></li></ul><figure><img src="'+k+`" alt="1559888437272" tabindex="0" loading="lazy"><figcaption>1559888437272</figcaption></figure><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>沙盒：在计算机安全领域，沙盒（英语：sandbox，又译为沙箱）是一种安全机制，为运行中的程序提供的隔离环境。通常是作为一些来源不可信、具破坏力或无法判定程序意图的程序提供实验之用。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-4-集装箱思想" tabindex="-1"><a class="header-anchor" href="#_2-4-集装箱思想" aria-hidden="true">#</a> 2.4 集装箱思想</h2><p>Docker借鉴了标准<strong>集装箱的概念</strong>。标准集装箱将货物运往世界各地，Dock将这个模型运用到自己的设计中，唯一不同的是：集装箱运输货物，而Docker运输软件、应用程序。</p><p>和集装箱一样，Docker在执行上述操作时，<strong>并不关心容器中到底装了什么</strong>，它不管是web服务器，还是数据库，或者是应用程序服务器什么的。所有的容器都按照相同的方式将内容“装载”进去。</p><p>Docker也不关心你要把容器运到何方：我们可以在自己的笔记本中构建容器，上传到Registry，然后下载到一个物理的或者虚拟的服务器来测试，在把容器部署到具体的主机中。像标准集装箱一样，Docker容器方便替换，可以叠加，易于分发，并且尽量通用。</p><figure><img src="`+v+'" alt="1559888748414" tabindex="0" loading="lazy"><figcaption>1559888748414</figcaption></figure><h2 id="_2-5-container与vm区别" tabindex="-1"><a class="header-anchor" href="#_2-5-container与vm区别" aria-hidden="true">#</a> 2.5 container与vm区别</h2><p>物理机：</p><figure><img src="'+m+'" alt="1559893092970" tabindex="0" loading="lazy"><figcaption>1559893092970</figcaption></figure><p>虚拟机：</p><figure><img src="'+h+'" alt="1559893104724" tabindex="0" loading="lazy"><figcaption>1559893104724</figcaption></figure><p>容器：最大化的利用资源。</p><figure><img src="'+b+'" alt="1559893114418" tabindex="0" loading="lazy"><figcaption>1559893114418</figcaption></figure><p>通过上面这三张抽象图，我们大概可以通过类比概括出： 容器虚拟化的是操作系统而不是硬件，容器之间是共享同一套操作系统资源的。虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统。</p><p>容器和虚拟机具有相似的资源隔离和分配优势，但功能有所不同，因为容器虚拟化的是操作系统，而不是硬件，因此容器更容易移植，效率也更高。</p><p>容器在Linux上本机运行，并与其他容器共享主机的内核。 它运行一个独立的进程，不占用任何其他可执行文件的内存，使其轻量级。相比之下，虚拟机（VM）运行一个完整的“客户”操作系统，通过虚拟机管理程序对主机资源进行虚拟访问。 通常，VM提供的环境比大多数应用程序需要的资源更多。</p><h2 id="_2-6-虚拟机已死-容器才是未来" tabindex="-1"><a class="header-anchor" href="#_2-6-虚拟机已死-容器才是未来" aria-hidden="true">#</a> 2.6 虚拟机已死 容器才是未来</h2><figure><img src="'+g+'" alt="1559893171524" tabindex="0" loading="lazy"><figcaption>1559893171524</figcaption></figure><figure><img src="'+f+'" alt="1560061407995" tabindex="0" loading="lazy"><figcaption>1560061407995</figcaption></figure><ul><li>容器是一个应用层抽象，用于将代码和依赖资源打包在一起。 多个容器可以在同一台机器上运行，共享操作系统内核，但各自作为独立的进程在用户空间中运行 。与虚拟机相比， 容器占用的空间较少（容器镜像大小通常只有几十兆），瞬间就能完成启动 。</li><li>虚拟机（VM）是一个物理硬件层抽象，用于将一台服务器变成多台服务器。 管理程序允许多个VM在一台机器上运行。每个VM都包含一整套操作系统、一个或多个应用、必要的二进制文件和库资源，因此占用大量空间。而且VM启动也十分缓慢 。</li></ul><h1 id="_3-docker版本以及安装" tabindex="-1"><a class="header-anchor" href="#_3-docker版本以及安装" aria-hidden="true">#</a> 3 docker版本以及安装</h1><p>docker安装到Ubuntu OS上。 docker是基于Ubuntu发布的。 CentOS：版本要求 CentOS7.x版本。</p><h2 id="_3-1-docker版本介绍" tabindex="-1"><a class="header-anchor" href="#_3-1-docker版本介绍" aria-hidden="true">#</a> 3.1 docker版本介绍</h2><p>Docker CE 在 17.03 版本之前叫 Docker Engine, Docker Engine 的版本号范围: <strong>0.1.0 ~ 1.13.1</strong></p><p>在 2017 年 3 月 2 日, docker 团队宣布企业版 Docker Enterprise Edition ( EE ) 发布. 为了一致, 免费的 Docker Engine 改名为 Docker Community Edition ( CE ), 并且采用基于时间的版本号方案. 就在这一天, Docker EE 和 Docker CE 的 17.03 版本发布, 这也是第一个采用新的版本号方案的版本.</p><p>Docker CE/EE 每个季度发布一次 <strong>季度版本</strong>, 也就是说每年会发布 4 个季度版本, 17.03, 17.06, 17.09, 17.12 就是 2017 年的 4 个季度版本的版本号, 同时 Docker CE 每个月还会发布一个 EDGE 版本，比如 17.04, 17.05, 17.07, 17.08, 17.10, 17.11 ......</p><p>Docker CE 季度版本自发布后会有 4 个月的维护期.</p>',71),x=e("code",null,"YY.MM.<patch>",-1),S={href:"http://YY.MM",target:"_blank",rel:"noopener noreferrer"},E=a(`<p>Docker is available in two editions:</p><ul><li>Community Edition (CE)：社区版</li><li>Enterprise Edition (EE)：企业版</li></ul><p>Docker Community Edition (CE) is ideal for individual developers and small teams looking to get started with Docker and experimenting with container-based apps.</p><p>Docker Enterprise Edition (EE) is designed for enterprise development and IT teams who build, ship, and run business critical applications in production at scale.</p><h2 id="_3-2-docker安装" tabindex="-1"><a class="header-anchor" href="#_3-2-docker安装" aria-hidden="true">#</a> 3.2 docker安装</h2><h3 id="_3-2-1-版本要求" tabindex="-1"><a class="header-anchor" href="#_3-2-1-版本要求" aria-hidden="true">#</a> 3.2.1 版本要求</h3><p>docker对Ubuntu的支持是最好的，因此本次学习的过程中我们在Ubuntu下安装docker ce版本。如果是 CentOS：安装docker 建议7.x及以上版本。</p><p>Docker支持在多种平台上使用，包括Mac、Windows、Cloud以及Linux系统上等。由于Docker是基于Ubuntu发布的，所以官方更推荐在Ubuntu上使用Docker，开发者也可以根据自己的实际开发环境选择合适的开发。在不同的平台上安装Docker必须满足不同的先决条件。本次选择在Ubuntu16.04版本上使用Docker。</p><p>To install Docker CE, you need the 64-bit version of one of these Ubuntu versions:</p><ul><li>Cosmic 18.10</li><li>Bionic 18.04 (LTS)</li><li>Xenial 16.04 (LTS)</li></ul><p>Docker CE is supported on <code>x86_64</code> (or <code>amd64</code>), <code>armhf</code>, <code>arm64</code>, <code>s390x</code> (IBM Z), and <code>ppc64le</code> (IBM Power) architectures.</p><h3 id="_3-2-2-安装步骤" tabindex="-1"><a class="header-anchor" href="#_3-2-2-安装步骤" aria-hidden="true">#</a> 3.2.2 安装步骤</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>一、安装docker存储库（在新主机上首次安装Docker CE之前，需要设置Docker存储库。之后，您可以从存储库安装和更新Docker）
<span class="token number">1</span>、sudo <span class="token function">apt-get</span> update
<span class="token number">2</span>、sudo <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token punctuation">\\</span>
    apt-transport-https <span class="token punctuation">\\</span>
    ca-certificates <span class="token punctuation">\\</span>
    <span class="token function">curl</span> <span class="token punctuation">\\</span>
    gnupg-agent <span class="token punctuation">\\</span>
    software-properties-common
<span class="token number">3</span>、curl <span class="token parameter variable">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
<span class="token number">4</span>、sudo add-apt-repository <span class="token punctuation">\\</span>
   <span class="token string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \\
   <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> \\
   stable&quot;</span>

二、安装docker ce
<span class="token number">1</span>、sudo <span class="token function">apt-get</span> update
<span class="token number">2</span>、sudo <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io


三、测试
systemctl status <span class="token function">docker</span>

<span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-3-docker-engine" tabindex="-1"><a class="header-anchor" href="#_3-3-3-docker-engine" aria-hidden="true">#</a> 3.3.3 docker engine</h3><p>查看帮助文档：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>查看docker详细信息
<span class="token function">docker</span> info

查看docker版本
<span class="token function">docker</span> --version/version<span class="token punctuation">(</span>c/s  server：docker engine架构<span class="token punctuation">)</span>

启动/停止/重启docker：
<span class="token function">sudo</span> systemctl start/stop/restart <span class="token function">docker</span>

Ubuntu：开机自动启动
CentOS：手动启动
开机启动：systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>

查看docker运行状态
<span class="token function">sudo</span> sytemctl status <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_4-docker架构" tabindex="-1"><a class="header-anchor" href="#_4-docker架构" aria-hidden="true">#</a> 4 docker架构</h1><p>Docker uses a client-server architecture. The Docker <em>client</em> talks to the Docker <em>daemon</em>, which does the heavy lifting of building, running, and distributing your Docker containers. The Docker client and daemon <em>can</em> run on the same system, or you can connect a Docker client to a remote Docker daemon. The Docker client and daemon communicate using a REST API, over UNIX sockets or a network interface. （Docker使用客户端 - 服务器架构。 Docker客户端与Docker守护进程通信，后者负责构建，运行和分发Docker容器。 Docker客户端和守护程序可以在同一系统上运行，也可以将Docker客户端连接到远程Docker守护程序。 Docker客户端和守护程序使用REST API，通过UNIX套接字或网络接口进行通信。）</p><figure><img src="`+_+'" alt="1559890995769" tabindex="0" loading="lazy"><figcaption>1559890995769</figcaption></figure><h2 id="_4-1-docker-daemon" tabindex="-1"><a class="header-anchor" href="#_4-1-docker-daemon" aria-hidden="true">#</a> 4.1 docker daemon</h2><p>The Docker daemon (<code>dockerd</code>) listens for Docker API requests and manages Docker objects such as images, containers, networks, and volumes. A daemon can also communicate with other daemons to manage Docker services. (Docker守护程序（dockerd）侦听Docker API请求并管理Docker对象，如图像，容器，网络和卷。 守护程序还可以与其他守护程序通信以管理Docker服务。)</p><h2 id="_4-2-docker-client" tabindex="-1"><a class="header-anchor" href="#_4-2-docker-client" aria-hidden="true">#</a> 4.2 docker client</h2><p>The Docker client (<code>docker</code>) is the primary way that many Docker users interact with Docker. When you use commands such as <code>docker run</code>, the client sends these commands to <code>dockerd</code>, which carries them out. The <code>docker</code> command uses the Docker API. The Docker client can communicate with more than one daemon. (Docker客户端（docker）是许多Docker用户与Docker交互的主要方式。 当您使用诸如docker run之类的命令时，客户端会将这些命令发送到dockerd，后者将其执行。 docker命令使用Docker API。 Docker客户端可以与多个守护进程通信。)</p><h2 id="_4-3-docker-registry" tabindex="-1"><a class="header-anchor" href="#_4-3-docker-registry" aria-hidden="true">#</a> 4.3 docker registry</h2><p>A Docker <em>registry</em> stores Docker images. Docker Hub is a public registry that anyone can use, and Docker is configured to look for images on Docker Hub by default. You can even run your own private registry. If you use Docker Datacenter (DDC), it includes Docker Trusted Registry (DTR).</p><p>When you use the <code>docker pull</code> or <code>docker run</code> commands, the required images are pulled from your configured registry. When you use the <code>docker push</code> command, your image is pushed to your configured registry.(Docker注册表存储Docker镜像。 Docker Hub是任何人都可以使用的公共注册中心，Docker配置为默认在Docker Hub上查找图像。 您甚至可以运行自己的私人注册表。 如果您使用Docker Datacenter（DDC），它包括Docker Trusted Registry（DTR）。使用docker pull或docker run命令时，将从配置的注册表中提取所需的映像。 使用docker push命令时，图像将被推送到配置的注册表。)</p><h1 id="_5-docker镜像操作" tabindex="-1"><a class="header-anchor" href="#_5-docker镜像操作" aria-hidden="true">#</a> 5 docker镜像操作</h1>',27),C={href:"https://docs.docker-cn.com/glossary/?term=container",target:"_blank",rel:"noopener noreferrer"},O=a(`<h2 id="_5-1-列出镜像" tabindex="-1"><a class="header-anchor" href="#_5-1-列出镜像" aria-hidden="true">#</a> 5.1 列出镜像</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> images

REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              fce289e99eb9        <span class="token number">5</span> months ago        <span class="token number">1</span>.84kB

这些镜像都是存储在Docker宿主机的/var/lib/docker目录下。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>**REPOSITORY：**表示镜像的仓库源</li><li>**TAG：**镜像的标签（版本），同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本，如ubuntu仓库源里，有15.10、14.04等多个不同的版本。</li><li>**IMAGE ID：**镜像ID</li><li>**CREATED：**镜像创建时间</li><li>**SIZE：**镜像大小</li></ul><h2 id="_5-2-查找镜像" tabindex="-1"><a class="header-anchor" href="#_5-2-查找镜像" aria-hidden="true">#</a> 5.2 查找镜像</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> search 镜像名称
NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
centos                             The official build of CentOS.                   <span class="token number">5391</span>                <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>                
ansible/centos7-ansible            Ansible on Centos7                              <span class="token number">121</span>                                     <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
jdeathe/centos-ssh                 CentOS-6 <span class="token number">6.10</span> x86_64 / CentOS-7 <span class="token number">7.5</span>.1804 x86…   <span class="token number">110</span>                                     <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
consol/centos-xfce-vnc             Centos container with <span class="token string">&quot;headless&quot;</span> VNC session…   <span class="token number">91</span>                                      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
imagine10255/centos6-lnmp-php56    centos6-lnmp-php56                              <span class="token number">56</span>                                      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
centos/mysql-57-centos7            MySQL <span class="token number">5.7</span> SQL database server                   <span class="token number">53</span>                                      
tutum/centos                       Simple CentOS <span class="token function">docker</span> image with SSH access      <span class="token number">44</span>                                      
centos/postgresql-96-centos7       PostgreSQL is an advanced Object-Relational …   <span class="token number">37</span>                                      
kinogmt/centos-ssh                 CentOS with SSH                                 <span class="token number">26</span>                                      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
pivotaldata/centos-gpdb-dev        CentOS image <span class="token keyword">for</span> GPDB development. Tag names…   <span class="token number">10</span>                                      
drecom/centos-ruby                 centos ruby                                     <span class="token number">6</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
mamohr/centos-java                 Oracle Java <span class="token number">8</span> Docker image based on Centos <span class="token number">7</span>    <span class="token number">3</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
darksheer/centos                   Base Centos Image -- Updated hourly             <span class="token number">3</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
pivotaldata/centos                 Base centos, freshened up a little with a Do…   <span class="token number">3</span>                                       
miko2u/centos6                     CentOS6 日本語環境                                   <span class="token number">2</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
pivotaldata/centos-mingw           Using the mingw toolchain to cross-compile t…   <span class="token number">2</span>                                       
ovirtguestagent/centos7-atomic     The oVirt Guest Agent <span class="token keyword">for</span> Centos <span class="token number">7</span> Atomic Ho…   <span class="token number">2</span>                                       
indigo/centos-maven                Vanilla CentOS <span class="token number">7</span> with Oracle Java Developmen…   <span class="token number">1</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
mcnaughton/centos-base             centos base image                               <span class="token number">1</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
blacklabelops/centos               CentOS Base Image<span class="token operator">!</span> Built and Updates Daily<span class="token operator">!</span>     <span class="token number">1</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
pivotaldata/centos-gcc-toolchain   CentOS with a toolchain, but unaffiliated wi…   <span class="token number">1</span>                                       
pivotaldata/centos7-dev            CentosOS <span class="token number">7</span> image <span class="token keyword">for</span> GPDB development           <span class="token number">0</span>                                       
smartentry/centos                  centos with smartentry                          <span class="token number">0</span>                                       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
fortinj66/centos7-s2i-nodejs       based off of ryanj/centos7-s2i-nodejs.  Bigg…   <span class="token number">0</span>                                       
pivotaldata/centos6.8-dev          CentosOS <span class="token number">6.8</span> image <span class="token keyword">for</span> GPDB development         <span class="token number">0</span>                                       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**NAME：**镜像仓库源的名称</p><p>**DESCRIPTION：**镜像的描述</p><p>**starts：**用户评价，反应一个镜像的受欢迎程度</p><p>**OFFICIAL：**是否docker官方发布</p><p>**auto commit：**自动构建，表示该镜像由Docker Hub自动构建流程创建的</p><h2 id="_5-3-拉取镜像" tabindex="-1"><a class="header-anchor" href="#_5-3-拉取镜像" aria-hidden="true">#</a> 5.3 拉取镜像</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull 镜像名称<span class="token punctuation">[</span>:version<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,12),w={href:"http://docker.io",target:"_blank",rel:"noopener noreferrer"},I=a(`<div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>PS：配置镜像加速器（参考该网站具体的文档操作）

<span class="token key attr-name">-</span> <span class="token value attr-value">阿里云（先加入阿里云开发者平台：https://dev.aliyun.com）</span>
<span class="token key attr-name">-</span> <span class="token value attr-value">docker中国加速器（https://www.docker-cn.com)</span>
<span class="token key attr-name">-</span> <span class="token value attr-value">USTC加速器（https://lug.ustc.edu.cn/wiki/ ）  真正的公共服务（无需任何操作）</span>
<span class="token key attr-name">-</span> <span class="token value attr-value">daocloud、网易蜂巢加速器：略</span>

步骤：
<span class="token key attr-name">sudo</span> <span class="token value attr-value">vim /etc/docker/daemon.json</span>
	配置内容：
	{
<span class="token key attr-name">  		&quot;registry-mirrors&quot;</span><span class="token punctuation">:</span> <span class="token value attr-value">[&quot;https://cs913o6k.mirror.aliyuncs.com&quot;]</span>
	}
<span class="token key attr-name">sudo</span> <span class="token value attr-value">systemctl daemon-reload</span>
<span class="token key attr-name">sudo</span> <span class="token value attr-value">systemctl restart docker</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-4-删除镜像" tabindex="-1"><a class="header-anchor" href="#_5-4-删除镜像" aria-hidden="true">#</a> 5.4 删除镜像</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>、删除一个镜像
<span class="token function">docker</span> rmi 镜像名称/id

<span class="token number">2</span>、删除多个镜像
<span class="token function">docker</span> rmi 镜像名称1/id1 镜像名称2/id2 <span class="token punctuation">..</span>.

<span class="token number">3</span>、删除所有镜像
<span class="token function">docker</span> rmi <span class="token variable"><span class="token variable">\`</span><span class="token function">docker</span> images <span class="token parameter variable">-q</span><span class="token variable">\`</span></span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-5-推送镜" tabindex="-1"><a class="header-anchor" href="#_5-5-推送镜" aria-hidden="true">#</a> 5.5 推送镜</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> push

PS：将指定的镜像推到到docker仓库中。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-5-制作镜像" tabindex="-1"><a class="header-anchor" href="#_5-5-制作镜像" aria-hidden="true">#</a> 5.5 制作镜像</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>方式一：基于Dockerfile构建
<span class="token function">docker</span> builder（需要掌握DSL语法）

方式二：将运行的容器提交为一个新的镜像
<span class="token function">docker</span> commit（简单）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-6-设置镜像标签" tabindex="-1"><a class="header-anchor" href="#_5-6-设置镜像标签" aria-hidden="true">#</a> 5.6 设置镜像标签</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> tag

PS：在推送镜像到docker参库前需要设置该镜像的tag
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_6-docker容器操作" tabindex="-1"><a class="header-anchor" href="#_6-docker容器操作" aria-hidden="true">#</a> 6 docker容器操作</h1>`,10),T={href:"https://docs.docker-cn.com/glossary/?term=image",target:"_blank",rel:"noopener noreferrer"},M=a(`<h2 id="_6-1-创建容器" tabindex="-1"><a class="header-anchor" href="#_6-1-创建容器" aria-hidden="true">#</a> 6.1 创建容器</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token punctuation">[</span>options<span class="token punctuation">]</span> image <span class="token builtin class-name">command</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
options选项: -i、-t、-d、--name
-i：交互式容器
-t：tty，终端
-d:后台运行，并且打印容器id

<span class="token function">sh</span> /usr/local/tomcat7/bin/startup.sh（shell脚本  <span class="token comment">#/bin/bash  py  rb  lua）</span>
Linux：根的进程：/bin/bash  tree
				/xxx
					/yyy

eg:创建的容器名称不能重复
<span class="token function">docker</span> run <span class="token parameter variable">--name</span><span class="token operator">=</span>u1 ubuntu
<span class="token function">docker</span> run <span class="token parameter variable">-i</span> <span class="token parameter variable">-t</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>u1 ubuntu /bin/bash
<span class="token function">docker</span> run <span class="token parameter variable">-i</span> <span class="token parameter variable">-t</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span><span class="token operator">=</span>u3 ubuntu /bin/bash

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-2-进入容器" tabindex="-1"><a class="header-anchor" href="#_6-2-进入容器" aria-hidden="true">#</a> 6.2 进入容器</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>方式一：
<span class="token function">docker</span> attach 容器名称/id				<span class="token punctuation">(</span>ps:exit,容器停止<span class="token punctuation">)</span>
eg：docker attach u3

方式二：
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器名称/id /bin/bash    （ps:exit,容器不会停止）
eg：docker <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> u3 /bin/bash

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-3-查看容器" tabindex="-1"><a class="header-anchor" href="#_6-3-查看容器" aria-hidden="true">#</a> 6.3 查看容器</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> ps：查看正在运行的容器
<span class="token function">docker</span> <span class="token function">ps</span> -a：查看运行过的容器（历史）
<span class="token function">docker</span> <span class="token function">ps</span> -l：最后一次运行的容器
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-4-停止-启动容器" tabindex="-1"><a class="header-anchor" href="#_6-4-停止-启动容器" aria-hidden="true">#</a> 6.4 停止/启动容器</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> start 容器名称/id
<span class="token function">docker</span> stop 容器名称/id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-5-获取容器-镜像的元数据" tabindex="-1"><a class="header-anchor" href="#_6-5-获取容器-镜像的元数据" aria-hidden="true">#</a> 6.5 获取容器/镜像的元数据</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>查看容器/镜像全部信息：
<span class="token function">docker</span> inspect 容器/镜像

查看容器/镜像部分信息：
<span class="token function">docker</span> inspect <span class="token parameter variable">-f</span><span class="token operator">=</span><span class="token string">&#39;{{.NetworkSettings.IPAddress}}&#39;</span> 容器/镜像
-f：可通过--format代替
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-6-删除容器" tabindex="-1"><a class="header-anchor" href="#_6-6-删除容器" aria-hidden="true">#</a> 6.6 删除容器</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>删除一个容器：
<span class="token function">docker</span> <span class="token function">rm</span> 容器名称/id

删除多个容器：
<span class="token function">docker</span> <span class="token function">rm</span> 容器名称1/id1 容器名称2/id2 <span class="token punctuation">..</span>.

删除所有容器
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-q</span><span class="token variable">\`</span></span>

PS：无法删除正在运行的容器
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-7-查看容器日志" tabindex="-1"><a class="header-anchor" href="#_6-7-查看容器日志" aria-hidden="true">#</a> 6.7 查看容器日志</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> logs 容器名称/id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,14);function A(P,V){const s=c("ExternalLinkIcon");return o(),t("div",null,[y,e("p",null,[n("在基于时间的发布方案中，版本号格式为: "),x,n("，"),e("a",S,[n("YY.MM"),i(s)]),n(" 代表年月，patch 代表补丁号，从 0 开始，在季度版本 (如 17.03) 的维护期内，bug 修复相关的更新会以 patch 递增的方式发布, 比如 17.03.0 -> 17.03.1 -> 17.03.2")]),E,e("p",null,[n("Docker 镜像是"),e("a",C,[n("容器"),i(s)]),n("的基础。镜像是一个有序集合，其中包含根文件系统更改和在容器运行时中使用的相应执行参数。镜像通常 包含堆叠在彼此之上的联合分层文件系统。镜像没有状态并且始终不会发生更改。 当运行容器时，使用的镜像如果在本地中不存在，docker 就会自动从 docker 镜像仓库中下载，默认是从 Docker Hub 公共镜像源下载。")]),O,e("p",null,[n("Docker镜像首页，包括官方镜像和其它公开镜像。Docker Hub上最受欢迎的10大镜像（通过Docker registry API获取不了镜像被pull的个数，只能通过镜像的stars数量，来衡量镜像的流行度。毫无疑问，拥有最高stars数量的库都是官方库。国情的原因，国内下载 Docker HUB 官方的相关镜像比较慢，可以使用国内（"),e("a",w,[n("docker.io"),i(s)]),n("）的一些镜像加速器，镜像保持和官方一致，关键是速度块，推荐使用。配置镜像加速器：")]),I,e("p",null,[n("容器是 "),e("a",T,[n("docker 镜像"),i(s)]),n("的运行时实例。")]),M])}const B=r(D,[["render",A],["__file","docker-v2-01.html.vue"]]);export{B as default};
