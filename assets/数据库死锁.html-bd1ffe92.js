const n=JSON.parse('{"key":"v-45e4ef65","path":"/interview/database/mysql/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AD%BB%E9%94%81.html","title":"二、MySQL死锁","lang":"zh-CN","frontmatter":{"title":"二、MySQL死锁","date":"2023-04-10T16:41:49.000Z","order":2,"category":["MySQL","面试题","MySQL死锁"],"tag":["MySQL","面试题","MySQL死锁"],"author":{"name":"liuyangfang","link":"https://github.com/lyf110"},"description":"MySQL死锁 1 死锁简述 死锁是出现在多个事务对于同一个资源相互占用时，会出现循环依赖，等待互相释放锁的情况，可能会出现死锁 2 出现死锁的场景 2.1 准备工作 DROP TABLE IF EXISTS `account`; CREATE TABLE `account` ( `id` int(0) NOT NULL AUTO_INCREMENT COMMENT \'主键\', `name` varchar(255) CHARACTER SET utf8mb4 NULL DEFAULT NULL COMMENT \'账户名\', `balance` int(0) NULL DEFAULT NULL COMMENT \'账户余额\', PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB CHARACTER SET = utf8mb4 ROW_FORMAT = Dynamic; INSERT INTO `account` VALUES (1, \'zhangsan\', 1000); INSERT INTO `account` VALUES (2, \'lisi\', 1000);","head":[["meta",{"property":"og:url","content":"https://github.com/lyf110/interview/database/mysql/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%AD%BB%E9%94%81.html"}],["meta",{"property":"og:site_name","content":"lyf blog"}],["meta",{"property":"og:title","content":"二、MySQL死锁"}],["meta",{"property":"og:description","content":"MySQL死锁 1 死锁简述 死锁是出现在多个事务对于同一个资源相互占用时，会出现循环依赖，等待互相释放锁的情况，可能会出现死锁 2 出现死锁的场景 2.1 准备工作 DROP TABLE IF EXISTS `account`; CREATE TABLE `account` ( `id` int(0) NOT NULL AUTO_INCREMENT COMMENT \'主键\', `name` varchar(255) CHARACTER SET utf8mb4 NULL DEFAULT NULL COMMENT \'账户名\', `balance` int(0) NULL DEFAULT NULL COMMENT \'账户余额\', PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB CHARACTER SET = utf8mb4 ROW_FORMAT = Dynamic; INSERT INTO `account` VALUES (1, \'zhangsan\', 1000); INSERT INTO `account` VALUES (2, \'lisi\', 1000);"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://github.com/lyf110/"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-04-18T08:00:26.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"二、MySQL死锁"}],["meta",{"property":"article:author","content":"liuyangfang"}],["meta",{"property":"article:tag","content":"MySQL"}],["meta",{"property":"article:tag","content":"面试题"}],["meta",{"property":"article:tag","content":"MySQL死锁"}],["meta",{"property":"article:published_time","content":"2023-04-10T16:41:49.000Z"}],["meta",{"property":"article:modified_time","content":"2023-04-18T08:00:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"二、MySQL死锁\\",\\"image\\":[\\"https://github.com/lyf110/\\"],\\"datePublished\\":\\"2023-04-10T16:41:49.000Z\\",\\"dateModified\\":\\"2023-04-18T08:00:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"liuyangfang\\",\\"link\\":\\"https://github.com/lyf110\\"}]}"]]},"headers":[{"level":2,"title":"1 死锁简述","slug":"_1-死锁简述","link":"#_1-死锁简述","children":[]},{"level":2,"title":"2 出现死锁的场景","slug":"_2-出现死锁的场景","link":"#_2-出现死锁的场景","children":[{"level":3,"title":"2.1 准备工作","slug":"_2-1-准备工作","link":"#_2-1-准备工作","children":[]},{"level":3,"title":"2.2 互相更新导致死锁","slug":"_2-2-互相更新导致死锁","link":"#_2-2-互相更新导致死锁","children":[]},{"level":3,"title":"2.3 相互加排他锁导致死锁","slug":"_2-3-相互加排他锁导致死锁","link":"#_2-3-相互加排他锁导致死锁","children":[]},{"level":3,"title":"2.4 共享锁升级排他锁导致死锁","slug":"_2-4-共享锁升级排他锁导致死锁","link":"#_2-4-共享锁升级排他锁导致死锁","children":[]}]},{"level":2,"title":"3 死锁的处理","slug":"_3-死锁的处理","link":"#_3-死锁的处理","children":[]},{"level":2,"title":"4 innoDB死锁检测原理","slug":"_4-innodb死锁检测原理","link":"#_4-innodb死锁检测原理","children":[{"level":3,"title":"4.1 当前锁的信息表","slug":"_4-1-当前锁的信息表","link":"#_4-1-当前锁的信息表","children":[]},{"level":3,"title":"4.2 当前事务等待表","slug":"_4-2-当前事务等待表","link":"#_4-2-当前事务等待表","children":[]}]},{"level":2,"title":"5 参考文章","slug":"_5-参考文章","link":"#_5-参考文章","children":[]}],"git":{"createdTime":1681804826000,"updatedTime":1681804826000,"contributors":[{"name":"lyf110","email":"1102970594@qq.com","commits":1}]},"readingTime":{"minutes":5.79,"words":1736},"filePathRelative":"interview/database/mysql/数据库死锁.md","localizedDate":"2023年4月11日","excerpt":"<h1> MySQL死锁</h1>\\n<h2> 1 死锁简述</h2>\\n<p>死锁是出现在多个事务对于同一个资源相互占用时，会出现循环依赖，等待互相释放锁的情况，可能会出现死锁</p>\\n<h2> 2 出现死锁的场景</h2>\\n<h3> 2.1 准备工作</h3>\\n<div class=\\"language-sql line-numbers-mode\\" data-ext=\\"sql\\"><pre class=\\"language-sql\\"><code><span class=\\"token keyword\\">DROP</span> <span class=\\"token keyword\\">TABLE</span> <span class=\\"token keyword\\">IF</span> <span class=\\"token keyword\\">EXISTS</span> <span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>account<span class=\\"token punctuation\\">`</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">CREATE</span> <span class=\\"token keyword\\">TABLE</span> <span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>account<span class=\\"token punctuation\\">`</span></span>  <span class=\\"token punctuation\\">(</span>\\n  <span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>id<span class=\\"token punctuation\\">`</span></span> <span class=\\"token keyword\\">int</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">NOT</span> <span class=\\"token boolean\\">NULL</span> <span class=\\"token keyword\\">AUTO_INCREMENT</span> <span class=\\"token keyword\\">COMMENT</span> <span class=\\"token string\\">\'主键\'</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>name<span class=\\"token punctuation\\">`</span></span> <span class=\\"token keyword\\">varchar</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">255</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">CHARACTER</span> <span class=\\"token keyword\\">SET</span> utf8mb4 <span class=\\"token boolean\\">NULL</span> <span class=\\"token keyword\\">DEFAULT</span> <span class=\\"token boolean\\">NULL</span> <span class=\\"token keyword\\">COMMENT</span> <span class=\\"token string\\">\'账户名\'</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>balance<span class=\\"token punctuation\\">`</span></span> <span class=\\"token keyword\\">int</span><span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">)</span> <span class=\\"token boolean\\">NULL</span> <span class=\\"token keyword\\">DEFAULT</span> <span class=\\"token boolean\\">NULL</span> <span class=\\"token keyword\\">COMMENT</span> <span class=\\"token string\\">\'账户余额\'</span><span class=\\"token punctuation\\">,</span>\\n  <span class=\\"token keyword\\">PRIMARY</span> <span class=\\"token keyword\\">KEY</span> <span class=\\"token punctuation\\">(</span><span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>id<span class=\\"token punctuation\\">`</span></span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">USING</span> <span class=\\"token keyword\\">BTREE</span>\\n<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">ENGINE</span> <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">InnoDB</span> <span class=\\"token keyword\\">CHARACTER</span> <span class=\\"token keyword\\">SET</span> <span class=\\"token operator\\">=</span> utf8mb4 ROW_FORMAT <span class=\\"token operator\\">=</span> Dynamic<span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token keyword\\">INSERT</span> <span class=\\"token keyword\\">INTO</span> <span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>account<span class=\\"token punctuation\\">`</span></span> <span class=\\"token keyword\\">VALUES</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\'zhangsan\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">1000</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">INSERT</span> <span class=\\"token keyword\\">INTO</span> <span class=\\"token identifier\\"><span class=\\"token punctuation\\">`</span>account<span class=\\"token punctuation\\">`</span></span> <span class=\\"token keyword\\">VALUES</span> <span class=\\"token punctuation\\">(</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\'lisi\'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">1000</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"liu yang fang","license":"Apache License 2.0"},"autoDesc":true}');export{n as data};
